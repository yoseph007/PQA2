"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2300],{66605:function(e,t,n){n.d(t,{P9:function(){return g},Vw:function(){return h},aP:function(){return f},cE:function(){return x},fg:function(){return m},us:function(){return p}});var a=n(5362),r=n(27218),s=n(6385),i=n(13262),l=n(10228),o=n(77930),c=n(7653),d=n(19132),u=n(22534);let f=e=>{let{activeOrganization:t}=(0,r.t)(),n=null==t?void 0:t.uuid,s=!!(t&&e.length>0),l=(0,c.useMemo)(()=>e.map(e=>"/api/organizations/".concat(n,"/sync/chat/").concat(e)),[n,e]),o=(0,c.useMemo)(()=>({queryKey:e.map(e=>[i.cF,{orgUuid:n,syncSourceUuid:e}]),enabled:s,refetchInterval:e=>!!(e.state.data&&(0,d.sf)(e.state.data))&&5e3,meta:{noToast:!0}}),[s,n,e]);return(0,a.Nl)(l,o)},h=e=>!!e.some(e=>e.isLoading)||e.some(e=>e.data&&(0,d.sf)(e.data)),m=e=>Math.ceil(f(e).reduce((e,t)=>{var n,a,r;return t.isLoading||!t.data?e:e+(null!==(r=null===(a=t.data)||void 0===a?void 0:null===(n=a.status)||void 0===n?void 0:n.current_size_bytes)&&void 0!==r?r:0)},0)/s.r6),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,r.t)(),s=null==t?void 0:t.uuid,c=null==n?void 0:n.uuid,f=(0,o.useQueryClient)(),h=(0,d.gb)();return(0,a.uC)(()=>"/api/organizations/".concat(c,"/sync/chat"),"POST",{enabled:!!n,...e,onSuccess:function(){for(var t,n,a,r,o,d=arguments.length,u=Array(d),h=0;h<d;h++)u[h]=arguments[h];let[m]=u;f.setQueryData([i.cF,{orgUuid:c,syncSourceUuid:m.uuid}],m),m.type===l.Fg.GDRIVE&&m.config.uri&&(null===(t=m.status)||void 0===t?void 0:t.extra)&&(null===(n=m.status)||void 0===n?void 0:n.current_size_bytes)&&f.setQueryData([i.HI,{accountUUID:s,orgUUID:c,documentId:m.config.uri}],{uri:"drive:///".concat(m.config.uri),title:null===(r=m.status)||void 0===r?void 0:r.extra,size:null===(o=m.status)||void 0===o?void 0:o.current_size_bytes}),null===(a=e.onSuccess)||void 0===a||a.call(e,...u)},onError:function(){for(var t,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];null===(t=e.onError)||void 0===t||t.call(e,...a);let[s,i]=a;h(s,i),i.sync_source_type===l.Fg.GDRIVE&&(0,u.ZZ)(i.sync_source_config.uri)}})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.t)(),n=null==t?void 0:t.uuid,s=(0,o.useQueryClient)();return(0,a.uC)(()=>"/api/organizations/".concat(n,"/sync/chat"),"PUT",{enabled:!!t,...e,onSuccess:function(){for(var t,a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];let[o]=r;s.setQueryData([i.cF,{orgUuid:n,syncSourceUuid:o.uuid}],o),null===(t=e.onSuccess)||void 0===t||t.call(e,...r)}})},p=()=>{let{activeOrganization:e}=(0,r.t)(),t=null==e?void 0:e.uuid;return(0,a.uC)(e=>"/api/organizations/".concat(t,"/sync/chat/").concat(e),"DELETE",{enabled:!!e})}},89111:function(e,t,n){n.d(t,{H7:function(){return y},Mr:function(){return w},N:function(){return j},Y$:function(){return C},Yn:function(){return v}});var a,r,s,i,l=n(5362),o=n(27218),c=n(14448),d=n(13262),u=n(10228),f=n(88755),h=n(77930),m=n(81695),x=n(7653),g=n(19132);let p="github_success";(a=s||(s={})).PENDING="pending",a.STARTED="started",a.COMPLETED="completed",a.FAILED="failed",(r=i||(i={})).PATH_NOT_FOUND="path_not_found",r.INVALID_SHA="invalid_sha",r.SIZE_LIMIT_EXCEEDED="size_limit_exceeded",r.SOURCE_MISSING_OR_CHANGED="source_missing_or_changed";let b=e=>{let{shouldFetch:t=!1}=e,{activeOrganization:n}=(0,o.t)(),a=null==n?void 0:n.uuid,r=y();return(0,l.WE)("/api/organizations/".concat(a,"/sync/github/auth"),{queryKey:[d.Os,{orgUUID:a}],enabled:!!(t&&n&&r)})},v=function(){var e;let{callerIdentifier:t,toggleGithubModalOpen:n,fetchImmediately:a=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:r}=(0,o.t)(),s=null==r?void 0:r.uuid,i=y(),c=(0,m.useRouter)(),[d,u]=(0,x.useState)(a),h=b({shouldFetch:d}),v=(0,x.useCallback)(async()=>{var e,t;return d?null===(t=h.data)||void 0===t?void 0:t.is_authenticated:(u(!0),null===(e=(await h.refetch()).data)||void 0===e?void 0:e.is_authenticated)},[h,d]),{mutate:j}=(0,l.uC)("/api/organizations/".concat(s,"/sync/github/auth/start"),"POST",{enabled:!!(r&&i),onSuccess:e=>{c.push(e.redirect_url)}}),w="".concat(p,"=").concat(t);(0,g.BZ)({callerIdentifier:t,successParam:p,handleOpen:()=>{null==n||n(!0)}});let _=(0,m.useSearchParams)(),N=(0,f.Q)(),C=(0,x.useRef)(!1),k=(0,m.usePathname)(),M=(0,g.LZ)({pathname:k,searchParams:_,queryString:w,isClaudeApp:N});return{checkIsGithubAuthenticated:v,initGithubAuth:()=>{if(i){if(N){window.open("/settings/profile?open_in_browser=1&auth_start=github&origin=".concat(M));return}C.current||(C.current=!0,j({pre_auth_state:{origin:M}}))}},isGithubAuthenticated:!!(null===(e=h.data)||void 0===e?void 0:e.is_authenticated)}},j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,o.t)(),n=null==t?void 0:t.uuid,a=y(),r=(0,h.useQueryClient)();return(0,l.uC)("/api/organizations/".concat(n,"/sync/github/auth"),"DELETE",{enabled:!!(t&&a),...e,onSuccess:function(){for(var t,a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];r.invalidateQueries({queryKey:[d.Os,{orgUUID:n}]}),null===(t=e.onSuccess)||void 0===t||t.call(e,...s)}})},y=()=>{let{data:e}=(0,g.tc)(),t=(0,o.Cf)(),{value:n}=(0,c.F)("nighthawk_enabled"),a=!!(null==e?void 0:e.find(e=>e.type===u.Fg.GITHUB&&e.enabled));return!!(n&&(!t||a))},w=()=>{let{activeOrganization:e}=(0,o.t)(),t=null==e?void 0:e.uuid,n=y();return(0,l.WE)("/api/organizations/".concat(t,"/sync/github/repos"),{queryKey:[d.wD,{orgUUID:t}],enabled:!!(e&&n),meta:{noToast:!0}})},_=e=>{let{owner:t,repo:n,branch:a}=e,{activeOrganization:r}=(0,o.t)(),s=null==r?void 0:r.uuid,i=y(),c=new URLSearchParams({owner:null!=t?t:"",repo:null!=n?n:""}).toString();return(0,l.WE)("/api/organizations/".concat(s,"/sync/github/repo?").concat(c),{queryKey:[d.Rz,{orgUUID:s,owner:t,repo:n}],enabled:!!(t&&n&&!a&&r&&i),meta:{noToast:!0}})},N=e=>{let{owner:t,repo:n,branch:a}=e,{activeOrganization:r}=(0,o.t)(),s=null==r?void 0:r.uuid,i=y();return(0,l.WE)("/api/organizations/".concat(s,"/sync/github/repo/").concat(t,"/").concat(n,"/tree/").concat(a),{queryKey:[d.E0,{orgUUID:s,owner:t,repo:n,branch:a}],staleTime:3e5,enabled:!!(t&&n&&a&&r&&i),meta:{noToast:!0}})},C=e=>{var t;let{owner:n,repo:a,branch:r}=e,s=_({owner:n,repo:a,branch:r}),i=N({owner:n,repo:a,branch:r||(null===(t=s.data)||void 0===t?void 0:t.default_branch)});return{data:{repo:s.data,tree:i.data},isFetching:s.isFetching||i.isFetching,error:s.error||i.error}}},85465:function(e,t,n){n.d(t,{l:function(){return l}});var a=n(10228),r=n(2949),s=n(89111),i=n(74339);let l=()=>{let{initGithubAuth:e}=(0,s.Yn)(),{initDriveAuth:t}=(0,r.nC)();return n=>{n===a.Fg.GITHUB?e():n===a.Fg.GDRIVE?t():n===a.Fg.OUTLINE&&(0,i.fX)()}}},6688:function(e,t,n){n.d(t,{G:function(){return f},k:function(){return h}});var a=n(27573),r=n(27218),s=n(32737),i=n(11510),l=n(40950),o=n(45790),c=n(32559),d=n(53545);let u=e=>{let{intl:t}=e;return(0,a.jsx)(s.u,{tooltipContent:t.formatMessage({defaultMessage:"Claude will guide your learning process instead of just giving answers. You can adjust these instructions in the project anytime.",id:"X9ioIsDrqe"}),side:"right",align:"end",children:(0,a.jsx)(i.k,{size:16,className:"shrink-0"})})},f=(e,t)=>{let n=(0,r.Cf)(),s=(0,l.Z)(),i=(0,d.DU)();e=null!=e?e:null==i?void 0:i.type,t=null!=t?t:null==i?void 0:i.subtype;let f={};return n&&(f.createProjectTitle=s.formatMessage({defaultMessage:"Create a project",id:"HR5A+UPiIu"})),e===c.cd.Student&&(t===c.nL.Study&&(f.createProjectTitle=s.formatMessage({defaultMessage:"Create a study project",id:"aM+8eAE0xv"}),f.createProjectNameLabel=(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,a.jsx)(o.Z,{defaultMessage:"What course are you studying?",id:"v36OurBGgA"}),(0,a.jsx)(u,{intl:s})]}),f.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for studying your course materials, where Claude helps visualize key concepts, build comprehensive study guides, and tutor you according to your learning needs.",id:"KXxo+Xoski"})),t===c.nL.Career&&(f.createProjectTitle=s.formatMessage({defaultMessage:"Create a career project",id:"so02zrH0dG"}),f.createProjectNameLabel=s.formatMessage({defaultMessage:"What are you working towards?",id:"lqTAz2gpwu"}),f.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for exploring career opportunities, where Claude helps match your skills to potential careers, improve your resume, and develop personalized roadmaps for professional growth.",id:"JlrkubQL9D"})),t===c.nL.Research&&(f.createProjectTitle=s.formatMessage({defaultMessage:"Create a research project",id:"L9PkdSYTu+"}),f.createProjectNameLabel=s.formatMessage({defaultMessage:"What are you researching?",id:"gsRiHcI+J7"}),f.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for developing academic research, where Claude helps identify key themes in your research, create structured outlines, and provide feedback to improve your drafts.",id:"WI7ROAQaAW"}))),f},h=e=>{let t=(0,l.Z)();if(!e)return{};let n=e.type,a=e.subtype,r={};return n===c.cd.Student&&(r.projectKnowledgeTitle=t.formatMessage({defaultMessage:"Reference materials",id:"IAK8rLiiAO"}),r.projectNoChatsMessage=t.formatMessage({defaultMessage:"Start a chat to keep conversations organized and re-use reference materials.",id:"ShAr8vcP2v"}),r.projectNoKnowledgeCantAddMessage=t.formatMessage({defaultMessage:"No reference materials added yet.",id:"2Gz7oaDTj0"}),r.projectKnowledgeDragDropMessage=t.formatMessage({defaultMessage:"Drop files here to add to reference materials",id:"hNUGHHYeEK"}),a===c.nL.Study&&(r.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop course materials like syllabi, lecture notes, or text-book excerpts so Claude can help you learn.",id:"hlIot3aXce"})),a===c.nL.Career&&(r.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop career materials like your resume, cover letters, or job descriptions to help Claude provide personalized professional advice.",id:"LXnjolwaEB"})),a===c.nL.Research&&(r.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop research materials like draft papers, source notes, or literature reviews to help Claude provide targeted academic guidance.",id:"c5oBAmpUAc"}))),r}},18409:function(e,t,n){n.d(t,{c:function(){return l},e:function(){return o}});var a=n(28266),r=n(6766),s=n(27218),i=n(15992);let l=e=>{var t,n;let{config:a}=(0,i.useConfig)("hatch_token_limits"),r=(0,s.Cf)(),l=(0,s.ZJ)(),o=a.get(e||"default",a.get("default",{}));return null!==(n=null==o?void 0:null===(t=o[r?"raven":l?"pro":"free"])||void 0===t?void 0:t.hardLimit)&&void 0!==n?n:9e4},o=(e,t)=>{let n=(0,a.wN)(e),{stickyModelPreference:s}=(0,r.M)();return l(e?n:t||s||n)}},31860:function(e,t,n){n.d(t,{$:function(){return s}});var a=n(27573),r=n(10571);function s(e){let{title:t,url:n,isLoading:s,isError:i,isLink:l=!1,defaultErrorTitle:o,defaultDocumentTitle:c}=e,d=(0,a.jsx)("p",{children:c});return(i?d=(0,a.jsx)("p",{children:o}):!s||t||c?t&&(d=(0,a.jsx)("p",{children:t})):d=(0,a.jsx)(r.g,{className:"opacity-25 rounded-md",height:18}),l&&n)?(0,a.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:d}):d}},71101:function(e,t,n){n.d(t,{C:function(){return l}});var a=n(27573),r=n(2949),s=n(84344),i=n(31860);function l(e){let{uri:t,isError:n,isLink:l=!1}=e,{data:o,isLoading:c}=(0,r.Mv)({documentId:t}),d=(0,s.m)(t);return(0,a.jsx)(i.$,{title:null==o?void 0:o.title,url:d,isLoading:c,isError:n,isLink:l,defaultErrorTitle:"Google Docs"})}},8628:function(e,t,n){n.d(t,{g:function(){return O},o:function(){return Y}});var a=n(27573),r=n(8571),s=n(32006),i=n(70354),l=n(60949),o=n(11607),c=n(32737),d=n(30947),u=n(6385);let f=e=>new Intl.NumberFormat().format(e);var h=n(10228),m=n(10484),x=n(35807),g=n(96346),p=n(34174),b=n(13140),v=n(39992),j=n(80151),y=n(67578),w=n(30070),_=n(76203),N=n(6092),C=n(66240),k=n(10607),M=n(7583),S=n(68425),E=n(87590),z=n.n(E),D=n(88146),F=n(7653),Z=n(45790),I=n(40950),A=n(89111),L=n(34326);let P="lastSelectedRepo";function T(e,t){return{name:e,path:t.endsWith("/")?t:t+"/",size:0,children:new Map}}function O(e){var t,n;let{initialConfig:r,tokenLimit:s,alreadyUsedTokens:i,onSubmit:l,isSubmitting:o}=e,[c,d]=(0,F.useState)("/"),f=void 0===r,h=s*u.dS,[m,x]=(0,F.useState)(()=>{if(r)return r;let e=function(){let e=localStorage.getItem(P);if(e){var t;let n=JSON.parse(e);if(n&&"object"==typeof(t=n)&&null!==t&&"string"==typeof t.owner&&"string"==typeof t.repo&&"string"==typeof t.branch)return n}return null}();return e?{owner:e.owner,repo:e.repo,branch:e.branch,filters:{filters:{}}}:{}}),{owner:g,repo:p,branch:b,filters:v}=m;(0,F.useEffect)(()=>{d("/")},[p]);let j=e=>{x({owner:g,repo:p,branch:b,filters:{filters:e}})},y=(0,F.useMemo)(()=>!z()(null==r?void 0:r.filters,v),[r,v]),{data:w,isFetching:_,error:N}=(0,A.Y$)({owner:g,repo:p,branch:b}),C=(0,F.useMemo)(()=>(function(e,t){if(!t||!e)return[];let n=[];for(let a of t.tree)"blob"===a.type&&(0,L.VG)(e,"/"+a.path)&&n.push(a);return n})(null==v?void 0:v.filters,w.tree),[null==v?void 0:v.filters,w.tree]),k=Math.ceil(100*C.map(e=>e.size).reduce((e,t)=>e+t,0)/h)+Math.ceil(100*i/s),M=(0,F.useMemo)(()=>w.tree?function(e){let t={name:"",path:"/",size:0,children:new Map};for(let n of e.tree){let e=n.path.split("/"),a=e.pop(),r=t;for(let t=0;t<e.length;t++){let a=e[t];if(!r.children.has(a)){let n="/"+e.slice(0,t+1).join("/");r.children.set(a,T(a,n))}"blob"===n.type&&(r.size+=n.size),r=r.children.get(a)}"blob"===n.type?(r.children.set(a,{name:a,path:"/"+n.path,size:n.size}),r.size+=n.size):r.children.set(a,T(a,"/"+n.path))}return t}(w.tree):null,[w.tree]);(0,F.useEffect)(()=>{(null==w?void 0:w.repo)&&(null==w?void 0:w.repo.default_branch)&&!b&&x(e=>({...e,branch:w.repo.default_branch}))},[null==w?void 0:w.repo,b,x]),(0,F.useEffect)(()=>{if(g&&p&&b){var e;e={owner:g,repo:p,branch:b},localStorage.setItem(P,JSON.stringify(e))}},[g,p,b]);let[S,E]=(0,F.useState)("");return(0,a.jsxs)("div",{className:"rounded-xl border-0.5 border-border-300 bg-bg-000 shadow-sm h-[600px] flex flex-col",children:[(0,a.jsx)(B,{isCreating:f,config:m,setConfig:x,searchQuery:S,setSearchQuery:E,isSubmitting:o,percentUsed:k,onSubmit:l,areFiltersDirty:y}),_?(0,a.jsx)(G,{}):null!==N?(0,a.jsx)(U,{error:N}):p&&g&&b?S?(0,a.jsx)(K,{rootNode:M,searchQuery:S,filters:null!==(t=null==v?void 0:v.filters)&&void 0!==t?t:{},setFilters:j,sizeLimit:h,setCurrentDirectory:d,setSearchQuery:E}):(0,a.jsx)(Y,{repo:p,rootNode:M,filters:null!==(n=null==v?void 0:v.filters)&&void 0!==n?n:{},setFilters:j,sizeLimit:h,currentDirectory:c,setCurrentDirectory:d}):(0,a.jsx)(R,{}),(0,a.jsx)(q,{percentUsed:k,selectedPaths:C,alreadyUsedTokens:i,tokenLimit:s})]})}function R(){return(0,a.jsx)("div",{className:"flex items-center justify-center h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,a.jsx)(Z.Z,{defaultMessage:"Select a repository or paste a URL above to get started",id:"aGsfPG9sTD"})})}let G=()=>(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 h-full bg-bg-000 shadow-sm text-sm text-text-300",children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.Loading,{size:"sm"})}),(0,a.jsx)(Z.Z,{defaultMessage:"Fetching repository...",id:"hnjVW1oRt2"})]});function U(e){let{error:t}=e,{githubAppUrl:n}=(0,r.m)(),s="".concat(n,"/installations/select_target"),i=t instanceof d.Hx&&404===t.statusCode,l=t instanceof d.Hx&&"github_get_tree_api_call_limit_exceeded"===t.errorCode;return(0,a.jsx)("div",{className:"flex h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,a.jsx)("div",{className:"flex items-center gap-2 m-6",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Q,{size:16}),(0,a.jsx)("span",{children:(0,a.jsx)(Z.Z,{defaultMessage:"Claude cannot access that resource. If you know that it exists, you may first need to grant or request access <link>here</link>.",id:"41xNOZpKM8",values:{link:e=>(0,a.jsx)(D.default,{href:s,target:"_blank",className:"underline",children:e})}})})]}):l?(0,a.jsx)("span",{className:"text-danger-000",children:(0,a.jsx)(Z.Z,{defaultMessage:"Please try a smaller repo.",id:"lvImCTHUvN"})}):(0,a.jsx)("span",{className:"text-danger-000",children:(0,a.jsx)(Z.Z,{defaultMessage:"An error occurred while fetching that resource. Please try again.",id:"u8OHhkIcYv"})})})})}function B(e){var t,n;let{config:r,setConfig:l,isCreating:o,isSubmitting:c,percentUsed:d,searchQuery:u,setSearchQuery:f,onSubmit:m,areFiltersDirty:g}=e,[p,b]=(0,F.useState)(!1),[v,j]=(0,F.useState)(!1);return(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center py-2 min-h-14 px-4 text-sm font-styrene border-b-0.5 border-border-300",children:[(0,a.jsx)(s.j0,{size:18,type:h.Fg.GITHUB,className:"flex-shrink-0"}),!p&&(0,a.jsx)(H,{config:r,setConfig:l,isCreating:o}),(0,a.jsxs)("div",{className:"inline-flex gap-0 items-center",children:[(0,a.jsx)(V,{isCreating:o,isExpanded:p,setIsExpanded:b,setConfig:l,className:(0,k.Z)({"flex-1 flex-shrink":o&&p})}),r.repo&&!p&&(0,a.jsx)(W,{isExpanded:v,setIsExpanded:j,searchQuery:u,setSearchQuery:f,className:"flex-1 flex-shrink"})]}),(0,a.jsx)(M.M,{children:!p&&r.repo&&!(0,L.xb)(null!==(n=null===(t=r.filters)||void 0===t?void 0:t.filters)&&void 0!==n?n:{})&&(o||g)&&(0,a.jsx)(S.E.div,{className:"ml-auto",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,a.jsx)(i.z,{disabled:c||d>100||!r.owner||!r.repo||!r.branch,onClick:()=>m(r),children:c?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(x.U,{className:"animate-spin"})}):o?(0,a.jsx)(Z.Z,{defaultMessage:"Add files",id:"xrAjmQ72mN"}):(0,a.jsx)(Z.Z,{defaultMessage:"Update",id:"BWpuKlRSA1"})})})})]})}function H(e){let{config:t,setConfig:n,isCreating:r,className:s}=e,{data:i=[]}=(0,A.Mr)(),l=i.map(e=>({owner:e.owner.login,repo:e.name,branch:e.default_branch}));t.owner&&t.repo&&t.branch&&!l.some(e=>e.repo===t.repo&&e.owner===t.owner&&e.branch===t.branch)&&l.unshift({owner:t.owner,repo:t.repo,branch:t.branch});let[o,c]=(0,F.useState)(void 0);return(0,F.useEffect)(()=>{t.owner&&t.repo&&t.branch?c(JSON.stringify({owner:t.owner,repo:t.repo,branch:t.branch})):c(void 0)},[t]),(0,a.jsx)("div",{className:s,children:(0,a.jsxs)(C.fC,{value:o,onValueChange:e=>{n({...JSON.parse(e),filters:{filters:{}}}),c(e)},disabled:!r,children:[(0,a.jsxs)(C.xz,{className:(0,k.Z)("flex flex-row rounded-md border-0.5 px-2 border-border-300 py-1 items-center gap-1 text-nowrap overflow-x-hidden",{"max-w-96  pointer-cursor select-none hover:bg-bg-100 ":r,"bg-bg-100":!r}),children:[(0,a.jsx)(C.B4,{placeholder:"Select a repository"}),r&&(0,a.jsx)(C.JO,{className:"pl-1",children:(0,a.jsx)(g.p,{})})]}),(0,a.jsx)(C.h_,{children:(0,a.jsx)(C.VY,{className:"border-0.5 border-border-300 bg-bg-100 min-w-72 rounded-lg shadow-sm z-dropdown mt-1 p-1 max-h-96 overflow-y-auto",position:"popper",children:(0,a.jsx)(C.l_,{className:"overflow-auto",children:l.map((e,t)=>(0,a.jsx)(C.ck,{value:JSON.stringify(e),className:(0,k.Z)("relative flex flex-row p-1.5 cursor-pointer hover:bg-bg-200 focus:outline-none focus:bg-bg-200 rounded-md"),children:(0,a.jsx)(C.eT,{children:(0,a.jsxs)("span",{className:"flex flex-row text-sm items-center ",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-text-300",children:e.owner}),"\xa0",(0,a.jsx)("span",{className:"text-text-500/50",children:"/"}),"\xa0",(0,a.jsx)("span",{className:"text-text-000",children:e.repo})]}),(!r||r&&"master"!==e.branch&&"main"!==e.branch)&&(0,a.jsxs)("span",{className:" flex flex-row font-mono text-xs text-text-300 rounded-full px-1.5 ml-2 gap-1 items-center bg-border-400/[0.03] border-border-300 border-0.5 ",children:[(0,a.jsx)(p.S,{}),e.branch]})]})})},t))})})})]})})}function V(e){let{isCreating:t,isExpanded:n,setIsExpanded:r,setConfig:s,className:l}=e,o=(0,I.Z)(),[d,u]=(0,F.useState)(""),f=()=>{let{owner:e,repo:t,branch:n}=function(e){let t;try{t=new URL(null!=e?e:"")}catch(e){return{}}if("github.com"!==t.hostname)return{};let[,n,a,r,...s]=t.pathname.split("/");return{owner:n,repo:a,location:r,branch:s.join("/").replace(/\/$/,"")}}(d);s({owner:e,repo:t,branch:n,filters:{filters:{}}}),r(!1),u("")};return t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,k.Z)("flex flex-row gap-1 items-center text-sm px-0.5",{"border-0.5 border-border-300 rounded-md h-[29px] w-64 transition":n},l),children:[(0,a.jsx)(c.u,{tooltipContent:"Paste GitHub URL",children:!n&&(0,a.jsx)(i.z,{onClick:()=>r(!n),size:"icon_sm",variant:"ghost",disabled:n,children:(0,a.jsx)(b.a,{size:16})})}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ml-2",type:"text",value:d,onChange:e=>u(e.target.value),placeholder:o.formatMessage({defaultMessage:"Paste GitHub URL",id:"RobpzbjbFb"}),autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&f()}}),d&&(0,a.jsx)(M.M,{children:(0,a.jsx)(S.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,a.jsx)(i.z,{onClick:f,size:"icon_xs",children:(0,a.jsx)(v.U,{})})})})]})]}),n&&(0,a.jsx)(i.z,{onClick:()=>{r(!1),u("")},size:"icon_sm",variant:"ghost",className:"ml-2",children:(0,a.jsx)(j.X,{})})]})}function W(e){let{isExpanded:t,setIsExpanded:n,searchQuery:r,setSearchQuery:s,className:l}=e,o=(0,I.Z)();return(0,a.jsxs)("div",{className:(0,k.Z)("flex flex-row items-center text-sm pl-0 p-1",{"border-0.5 border-border-300 rounded-md h-[29px] transition":t},l),children:[(0,a.jsx)(c.u,{tooltipContent:"Search files",children:(0,a.jsx)(i.z,{onClick:()=>n(!t),size:"icon_sm",variant:"ghost",disabled:t,children:(0,a.jsx)(y.Y,{size:"16"})})}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",placeholder:o.formatMessage({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:r,className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ",onChange:e=>s(e.target.value),autoFocus:!0}),(0,a.jsx)(i.z,{onClick:()=>{s(""),n(!1)},size:"icon_xs",variant:"ghost",children:(0,a.jsx)(j.X,{})})]})]})}function Y(e){let{repo:t,rootNode:n,filters:r,setFilters:s,sizeLimit:i,currentDirectory:o,setCurrentDirectory:c}=e,d=function(e,t){let n=t.split("/").slice(1,-1),a=e;for(let e of n){if(!a.children)return null;a=a.children.get(e)}return a}(n,o),u=(null==d?void 0:d.children)?[...d.children.values()].sort((e,t)=>e.children?t.children?e.path.localeCompare(t.path):-1:1):[],f=(0,F.useMemo)(()=>{let e=[],n=o;for(;n;){let a=n.slice(n.lastIndexOf("/",n.length-2)).slice(1,-1);e.unshift({name:a||t,path:n}),n=(0,L.Il)(n)}return e},[t,o]),h=d?Q(d,r)?"partial":(0,L.VG)(r,d.path)?"checked":"unchecked":"unchecked";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 py-2 px-4 border-b-0.5 border-border-300 bg-bg-100/50 text-sm",children:[d&&(0,a.jsx)(l.g,{checkState:h,onClick:e=>{let{didCheck:t}=e;t?s((0,L.Yw)(r,d.path)):s((0,L.F8)(r,d.path))}}),(0,a.jsx)("div",{className:"flex-row gap-1 ",children:f.map((e,t)=>{let{path:n,name:r}=e;return f.length===t+1?(0,a.jsx)("span",{children:r},t):(0,a.jsxs)("span",{className:"first-child:pointer-events-none",children:[(0,a.jsx)("button",{className:"hover:text-text-200 text-text-500 transition",onClick:()=>c(n),children:r}),t<f.length-1&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"mx-1 text-text-500/50",children:"/"})})]},t)})})]},"breadcrumbs")}),(0,a.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:u.map(e=>(0,a.jsx)(J,{node:e,showPath:!1,filters:r,sizeLimit:i,onUpdateFilters:s,onClick:e.children?()=>c(e.path):void 0},e.path))},"rows")]})}function K(e){let{rootNode:t,searchQuery:n,filters:r,setFilters:s,sizeLimit:i,setCurrentDirectory:l,setSearchQuery:o}=e,c=(0,F.useMemo)(()=>{let e=[],a=[t],r=n.toLowerCase();for(;a.length>0&&e.length<50;){let t=a.pop();t.children&&a.push(...t.children.values()),t.path.toLowerCase().includes(r)&&e.push(t)}return e},[n,t]);return(0,a.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:c.slice(0,100).map(e=>(0,a.jsx)(J,{node:e,showPath:!0,filters:r,sizeLimit:i,onUpdateFilters:s,onClick:e.children?()=>{l(e.path),o("")}:void 0,onNavigate:e=>{l(e),o("")}},e.path))},"rows")}function q(e){let{percentUsed:t,selectedPaths:n,alreadyUsedTokens:r,tokenLimit:s}=e,{progressBarPercentPrimary:i,progressBarPercentSecondary:l}=(0,F.useMemo)(()=>{let e=Math.min(100,Math.ceil(100*r/s));return{progressBarPercentPrimary:Math.min(100,t-e),progressBarPercentSecondary:e}},[t,r,s]),o=(0,a.jsx)(Z.Z,{defaultMessage:"{percentUsed}% of capacity used",id:"1VbFlPsYRL",values:{percentUsed:X(t)}});return(0,a.jsxs)("div",{className:(0,k.Z)("flex text-xs items-center justify-between border-border-300 border-t-0.5 py-2 px-4 rounded-b-lg transition",{"bg-danger-100 text-danger-900":t>=100},{"text-text-300":t<100}),children:[n.length&&t<100?(0,a.jsx)("p",{children:(0,a.jsx)(Z.Z,{defaultMessage:"{selected, plural, one {# file} other {# files}} selected",id:"F7Bwhc8GRB",values:{selected:n.length}})}):t<100?(0,a.jsx)("p",{children:(0,a.jsx)(Z.Z,{defaultMessage:"Select files to add to chat context",id:"t6XeSPdQqI"})}):(0,a.jsxs)("div",{className:"inline-flex gap-2 items-center ",children:[(0,a.jsx)(w.v,{className:"opacity-80",size:14}),(0,a.jsx)("p",{children:(0,a.jsx)(Z.Z,{defaultMessage:"Remove some files to stay within size limits",id:"k+ns1o6klw"})})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)($,{totalPercent:t,secondaryPercent:l}),(0,a.jsx)("span",{className:"min-w-10 text-right",children:l>0?(0,a.jsx)(c.u,{tooltipContent:"".concat(X(l),"% used by other knowledge + ").concat(X(i),"% by this content"),children:(0,a.jsx)("span",{children:o})}):o})]})]})}function Q(e,t){if(void 0===e.children)return!1;if((0,L.VG)(t,e.path)){for(let n of e.children.values())if(!(0,L.VG)(t,n.path)||Q(n,t))return!0}else for(let n of e.children.values())if((0,L.VG)(t,n.path)||Q(n,t))return!0;return!1}function J(e){let{node:t,showPath:n,filters:r,sizeLimit:s,onUpdateFilters:i,onClick:o,onNavigate:c}=e,d=void 0!==t.children,u=(0,L.VG)(r,t.path),f=Q(t,r);return(0,a.jsxs)("div",{onClick:o,className:(0,k.Z)("group flex justify-start items-center gap-2 py-2 px-4 border-b-0.5 border-border-400 hover:bg-bg-100",{"cursor-pointer":o}),children:[(0,a.jsx)(l.g,{checkState:f?"partial":u?"checked":"unchecked",onClick:e=>{let{didCheck:n}=e;n?i((0,L.Yw)(r,t.path)):i((0,L.F8)(r,t.path))}}),void 0===t.children?(0,a.jsx)(_.$,{weight:"light",size:20,className:"flex-shrink-0 text-text-400"}):(0,a.jsx)(N.g,{weight:"fill",className:"flex-shrink-0 text-accent-secondary-200",size:20}),(0,a.jsx)("div",{className:(0,k.Z)("w-5/6 text-text-100 overflow-x-hidden text-ellipsis text-nowrap",{"text-text-200 group-hover:text-text-000":d}),onClick:e=>{d&&o&&(e.stopPropagation(),o())},children:n?(e=>{let t=e.replace(/^\/+|\/+$/g,"").split("/");return(0,a.jsx)("span",{children:t.map((e,n)=>{let r="/"+t.slice(0,n+1).join("/")+"/",s=n===t.length-1,i=!s&&c?e=>{e.stopPropagation(),c(r)}:void 0;return(0,a.jsxs)("span",{children:[(0,a.jsx)(s?"span":"button",{className:(0,k.Z)(s?"text-text-000":"text-text-400",i?"hover:text-text-100 transition":""),onClick:i,children:e}),!s&&(0,a.jsx)("span",{className:"opacity-25 mx-1",children:"/"})]},n)})})})(t.path):t.name}),s&&(0,a.jsxs)("span",{className:"w-1/6 text-text-400 text-xs text-right",children:[X(100*t.size/s),"%"]})]})}function X(e){return 0===e?"0":e<1?"<1":f(Math.ceil(e))}function $(e){let{totalPercent:t,secondaryPercent:n=0}=e,r=t>=100,s=t-n;return(0,a.jsx)("div",{className:"bg-bg-100 border-0.5 border-border-300 w-24 h-2 rounded-full overflow-hidden relative",children:(0,a.jsxs)("div",{className:"absolute inset-0",children:[n>0?(0,a.jsx)("div",{style:{width:"".concat(Math.min(100,Math.max(0,n)),"%")},className:"absolute inset-y-0 left-0 bg-border-400"}):null,s>0?(0,a.jsx)("div",{style:{width:"".concat(Math.min(100-(n||0),Math.max(s>0?4:0,s)),"%"),left:"".concat(n||0,"%")},className:(0,k.Z)("absolute inset-y-0 transition-all",{"bg-danger-100":r,"bg-text-100":!r})}):null]})})}},31275:function(e,t,n){n.d(t,{U:function(){return h}});var a=n(27573),r=n(52939),s=n(6385),i=n(10228),l=n(7653),o=n(66605),c=n(92676),d=n(23098),u=n(18409),f=n(8628);function h(e){let{isOpen:t,onClose:n,onCreated:h,projectUuid:m,location:x,syncSource:g,setIsUploadingGithubSync:p}=e,b=(0,d.mo)(),v=(0,u.e)(null),j="project"===x&&m?b:v,y=(0,d.nR)(m),w=(0,l.useMemo)(()=>{if(m&&void 0!==y){var e;return Math.max(0,y-((null==g?void 0:null===(e=g.status)||void 0===e?void 0:e.current_size_bytes)?g.type===i.Fg.GITHUB?g.status.current_size_bytes/s.dS:g.status.current_size_bytes/s.r6:0))}return 0},[m,y,g]),_=(0,l.useCallback)(e=>{null==h||h(e)},[h]),{mutate:N,isPending:C}=(0,c.gr)(m,{onSuccess:_,onError:()=>null==p?void 0:p(!1)}),{mutate:k,isPending:M}=(0,c.l2)(m,{onSuccess:n}),{mutate:S,isPending:E}=(0,o.cE)({onSuccess:_,onError:()=>null==p?void 0:p(!1)}),{mutate:z,isPending:D}=(0,o.P9)({onSuccess:n}),F=(0,l.useCallback)(e=>{g?("project"===x&&m?k:z)({sync_source_uuid:g.uuid,sync_source_config:e}):(null==p||p(!0),n(),("project"===x&&m?N:S)({sync_source_type:i.Fg.GITHUB,sync_source_config:e}))},[g,x,m,N,k,S,z,n,p]);return(0,a.jsx)(r.u_,{isOpen:t,onClose:n,title:"Add content from GitHub",subtitle:"Select the files you would like to add to this ".concat(m?"project":"chat"),modalSize:"xl",hasCloseButton:!0,autoCloseOnFocusOut:!1,children:(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(f.g,{initialConfig:null==g?void 0:g.config,tokenLimit:j,alreadyUsedTokens:w,isSubmitting:C||M||E||D,onSubmit:F})})})}},36459:function(e,t,n){n.d(t,{C:function(){return M}});var a=n(27573),r=n(27895),s=n(5984),i=n(32006),l=n(45033),o=n(44512),c=n(14448),d=n(10228),u=n(1154),f=n(30684),h=n(86973),m=n(7653),x=n(40950),g=n(45790),p=n(66605),b=n(92676),v=n(2949),j=n(96933),y=n(9677);function w(e){let{conversation:t}=e,n=(0,v.ez)(),r=(0,v.EU)(t),{toggleConvoAndAccountSetting:s}=(0,j.Bk)(null==t?void 0:t.id);return n?(0,a.jsx)("div",{className:"px-2 py-1.5 -mx-1 -mb-1 border-t-0.5 border-border-300 hover:bg-bg-200",children:(0,a.jsxs)(l.hP,{className:"flex flex-row gap-4 cursor-pointer px-2 pt-1 pb-2",onSelect:e=>{e.stopPropagation(),e.preventDefault(),s({enabled_bananagrams:!r})},onPointerLeave:e=>e.preventDefault(),onPointerMove:e=>e.preventDefault(),children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{children:(0,a.jsx)(g.Z,{defaultMessage:"Allow Claude to search",id:"zyxxt7OHPv"})}),(0,a.jsx)("p",{className:"text-xs text-text-400",children:(0,a.jsx)(g.Z,{defaultMessage:"Claude will search for relevant documents",id:"JxbYvAvtdV"})})]}),(0,a.jsx)(y.Z,{checked:r,readOnly:!0})]})}):null}var _=n(71101),N=n(70712),C=n(56767);let k={includeScore:!0,threshold:.3,keys:["title"],ignoreLocation:!0},M=e=>{let{conversation:t,projectUuid:n,trigger:i,align:u,isSubDropdown:f=!1,setIsUploadingDriveSync:g,onCreated:j,isOpen:y,setIsOpen:_,closeWholeDropdown:M=()=>_(!1),shouldAddSyncUponPaste:E}=e,z=(0,x.Z)(),{value:D}=(0,c.F)("kingfisher_prefetch"),{recentDriveDocs:F,isLoading:Z}=(0,v.td)(D||y),[I,A]=(0,m.useState)(""),[L,P]=(0,m.useState)(!1),[T,O]=(0,m.useState)(""),{addError:R}=(0,r.e)(),G=(0,m.useRef)(null),U=(0,m.useRef)(null),B=()=>{g(!0),P(!0)},H=e=>{null==j||j(e),M(),P(!1)},V=e=>{g(!1),P(!1),R((0,C.A)(e))},{mutate:W}=(0,p.cE)({onMutate:B,onSuccess:H,onError:V,meta:{noToast:!0}}),{mutate:Y}=(0,b.gr)(n,{onMutate:B,onSuccess:H,onError:V,meta:{noToast:!0}}),K=(0,m.useMemo)(()=>F&&I?new h.Z(F,k).search(I).map(e=>e.item):F,[F,I]),q=I?null==K?void 0:K.slice(0,7):null==F?void 0:F.slice(0,5),Q=e=>{M(),(n?Y:W)({sync_source_type:d.Fg.GDRIVE,sync_source_config:{uri:e}})},J=e=>{let t=(0,N.g)(e);A(e);let n="";if(t)Q(t);else if((0,N.k)(e))n=z.formatMessage({defaultMessage:"Only Google Docs are supported at this time",id:"P3m20xflVA"});else try{new URL(e),n=z.formatMessage({defaultMessage:"Not a valid Google Doc URL",id:"S//j6oF0j8"})}catch(e){}O(n)};(0,o.pp)({target:G,shouldFocus:y}),(0,m.useEffect)(()=>{y||(A(""),P(!1),O(""))},[y,A,P,O]);let X=!!n,$=f?l.A2:l.Lt;return(0,a.jsxs)($,{className:"text-md w-[332px] p-0 overflow-hidden",align:u,trigger:i,onKeyDown:e=>{if(!["Enter","ArrowDown","ArrowUp"].includes(e.key)){var t;null===(t=G.current)||void 0===t||t.focus()}},onFocusOutside:e=>e.preventDefault(),...f?{forceMount:!0}:{open:y,onOpenChange:_,unstyledTrigger:!0},children:[(0,a.jsx)(l.YG,{children:(0,a.jsx)(s.oi,{ref:G,value:I,placeholder:z.formatMessage({defaultMessage:"Search recents or paste URL",id:"jprBObbn5b"}),className:"w-full bg-inherit border-none select-none",onChange:e=>{J(e.target.value)},onPasteCapture:e=>{if(e.stopPropagation(),!y)return;let t=e.clipboardData.getData("text"),n=(0,N.g)(t);n&&E&&Q(n)},onKeyDown:e=>{if("ArrowLeft"===e.key&&I)e.stopPropagation();else if("Enter"===e.key)J(e.currentTarget.value);else if("ArrowDown"===e.key&&q&&q.length>0){var t;e.preventDefault(),null===(t=U.current)||void 0===t||t.focus()}},"data-1p-ignore":!0,autoComplete:"off",autoFocus:!0})}),(0,a.jsx)(S,{inputRef:G,firstDocumentRef:U,handleAddDocument:Q,documents:q,isValidatingUrl:L,isFetchingRecentDriveDocs:Z,errorMessage:T}),!X&&!I&&(0,a.jsx)(w,{conversation:t})]})},S=e=>{let{inputRef:t,firstDocumentRef:n,handleAddDocument:r,documents:s,isValidatingUrl:o,isFetchingRecentDriveDocs:c,errorMessage:h}=e,m=o||c&&!s.length,x=!!h,p=!m&&(!s||!s.length);return m?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-[220px]",children:(0,a.jsx)(u.$,{className:"animate-spin mx-auto"})}):x?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[220px] text-center",children:[(0,a.jsx)(f.l,{size:24,className:"text-text-400",weight:"duotone"}),(0,a.jsx)("p",{className:"text-md text-text-400 mt-4",children:(0,a.jsx)(g.Z,{defaultMessage:"Invalid URL",id:"SASA4f9KO3"})}),(0,a.jsx)("p",{className:"text-sm text-danger-000",children:h})]}):p?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[220px]",children:[(0,a.jsx)(f.l,{size:24,className:"text-text-400",weight:"duotone"}),(0,a.jsx)("p",{className:"text-md text-text-400 mt-4",children:(0,a.jsx)(g.Z,{defaultMessage:"No recents found",id:"2FzJykASLO"})}),(0,a.jsx)("p",{className:"text-sm text-text-500",children:(0,a.jsx)(g.Z,{defaultMessage:"Try pasting the URL instead",id:"jf3/+bX0lc"})})]}):(0,a.jsx)("div",{className:"px-1.5 py-1",children:s.map((e,s)=>{let{uri:o,title:c}=e;return(0,a.jsxs)(l.hP,{className:"!grid-cols-[max-content_auto] hover:text-text-000 hover:bg-bg-200",ref:0===s?n:void 0,onClick:()=>r(o),onKeyDown:e=>{if("ArrowUp"===e.key&&0===s){var n;e.preventDefault(),null===(n=t.current)||void 0===n||n.focus()}},textValue:"",onPointerLeave:e=>e.preventDefault(),onPointerMove:e=>e.preventDefault(),children:[(0,a.jsx)(i.j0,{type:d.Fg.GDRIVE,variant:i.cT.DOCS,size:16}),(0,a.jsx)("span",{className:"truncate",children:null!=c?c:(0,a.jsx)(_.C,{uri:o})})]},o)})})}},90824:function(e,t,n){n.d(t,{n4:function(){return w},wM:function(){return g}});var a=n(27573),r=n(91887),s=n(32006),i=n(13890),l=n(10228),o=n(7653),c=n(40950),d=n(2949),u=n(74339),f=n(85465),h=n(31275),m=n(84344);let x=e=>{let t=(0,c.Z)(),n={[l.co.UNAUTHENTICATED]:t.formatMessage({defaultMessage:"Authentication needed",id:"AYP3OHxyGn"}),[l.co.ACCESS_DENIED]:t.formatMessage({defaultMessage:"Content not accessible",id:"IPK01iLM7n"}),[l.co.DISABLED]:t.formatMessage({defaultMessage:"Feature disabled by organization",id:"0mkp6rxalw"})};return e in n?n[e]:void 0},g=e=>{var t;let{syncSourceType:n,syncStatus:s,title:o,url:c,handleClick:d,isLoading:u,actions:h,isSyncing:m,...g}=e,p=(0,i.ir)(s),v=x(s),j=(0,f.l)(),y={};return y=s===l.co.UNAUTHENTICATED?{handleClick:()=>{j(n)}}:d?{handleClick:d}:{url:c},(0,a.jsx)(r.vQ,{actions:h,title:null!==(t=null!=v?v:o)&&void 0!==t?t:"Untitled",tag:(0,a.jsx)(b,{type:n}),isError:p,isLoading:u,isSyncing:m,...y,...g})},p={[l.Fg.GDRIVE]:"DOC",[l.Fg.OUTLINE]:"DOC",[l.Fg.GITHUB]:"GITHUB",[l.Fg.SALESFORCE]:"SALESFORCE",[l.Fg.GMAIL]:"EMAIL",[l.Fg.GCAL]:"CALENDAR",[l.Fg.SLACK]:"SLACK",[l.Fg.ASANA]:"ASANA"},b=e=>{let{type:t}=e;return(0,a.jsxs)(r.l1,{children:[(0,a.jsx)(s.j0,{type:t,size:12,variant:t===l.Fg.GDRIVE?s.cT.DOCS:void 0}),(0,a.jsx)("p",{className:"uppercase truncate font-styrene text-text-300 text-[11px] leading-[13px]",children:p[t]})]})},v=e=>{let{projectUuid:t,syncSource:n,location:r,actions:s,isSyncing:l,...c}=e,[d,u]=(0,o.useState)(!1),{owner:f,repo:m}=n.config,x="".concat(f,"/").concat(m),p=n.config.branch,b=!(0,i.ir)(n.status.state),v=c.isEditable&&b,j=v||c.isInSelectionMode;return(0,a.jsxs)(a.Fragment,{children:[v&&(0,a.jsx)(h.U,{projectUuid:t,location:r,isOpen:d,onClose:()=>u(!1),syncSource:n}),(0,a.jsx)(g,{...c,syncSourceType:n.type,syncStatus:n.status.state,title:x,subtitle:p,handleClick:j?()=>{if(c.isInSelectionMode){var e;null===(e=c.handleSelect)||void 0===e||e.call(c,!0,!1)}u(!0)}:void 0,actions:s,isSyncing:l})]})},j=e=>{let{syncSource:t,actions:n,isSyncing:r,...s}=e,i=(0,m.m)(t.config.uri),{title:l,isLoading:o}=(0,d.Xv)({uri:t.config.uri}),c=s.isInSelectionMode?()=>{var e;null===(e=s.handleSelect)||void 0===e||e.call(s,!0,!1)}:void 0;return(0,a.jsx)(g,{handleClick:c,...s,syncSourceType:t.type,syncStatus:t.status.state,title:l,url:i,isLoading:s.isLoading||o,actions:n,isSyncing:r})},y=e=>{let{syncSource:t,actions:n,isSyncing:r,...s}=e,i=(0,m.v)(t.config.outline_uri),{title:l,isLoading:o}=(0,u.Zf)({uri:t.config.outline_uri}),c=s.isInSelectionMode?()=>{var e;null===(e=s.handleSelect)||void 0===e||e.call(s,!0,!1)}:void 0;return(0,a.jsx)(g,{handleClick:c,...s,syncSourceType:t.type,syncStatus:t.status.state,title:l,url:i,isLoading:s.isLoading||o,actions:n,isSyncing:r})},w=e=>{let{projectUuid:t,syncSource:n,isEditable:s=!1,location:i,actions:o,isSyncing:c,...d}=e;return(null==n?void 0:n.type)?n.type===l.Fg.GITHUB?(0,a.jsx)(v,{...d,projectUuid:t,syncSource:n,isEditable:s,location:i,actions:o,isSyncing:c}):n.type===l.Fg.GDRIVE?(0,a.jsx)(j,{...d,syncSource:n,isEditable:s,actions:o,isSyncing:c}):n.type===l.Fg.OUTLINE?(0,a.jsx)(y,{...d,syncSource:n,isEditable:s,actions:o,isSyncing:c}):void 0:(0,a.jsx)(r.fz,{})}},34326:function(e,t,n){function a(e,t){if(!t.startsWith("/"))throw Error("absolute path required");let n=t;for(;null!==n;){let t=e[n];if("include"===t)return!0;if("exclude"===t)break;n=l(n)}return!1}function r(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return a(e=i(e,t),t)&&(e={...e,[t]:"exclude"}),e}function s(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return a(e=i(e,t),t)||(e={...e,[t]:"include"}),e}function i(e,t){let n={...e};for(let a of Object.keys(e))(t.endsWith("/")&&t===a||a.startsWith(t))&&delete n[a];return n}function l(e){if(!e.startsWith("/"))throw Error("absolute path required");if("/"===e)return null;let t=e.endsWith("/")?e.lastIndexOf("/",e.length-2):e.lastIndexOf("/");return t<=0?"/":e.slice(0,t+1)}function o(e){return 0===Object.keys(e).length}n.d(t,{F8:function(){return r},Il:function(){return l},VG:function(){return a},Yw:function(){return s},xb:function(){return o}})},70712:function(e,t,n){n.d(t,{g:function(){return i},k:function(){return l}});let a=/docs\.google\.com\/document\/d\/([a-zA-Z0-9-_]+)/i,r=/document\/d\/([a-zA-Z0-9-_]+)/i,s=/(docs\.google\.com)|(drive\.google\.com)/i;function i(e){if(!e)return null;try{let t=new URL(e),n=!!t.toString().match(a),s=t.pathname.match(r);if(n&&s&&s[1])return s[1]}catch(e){}return null}function l(e){if(!e)return!1;try{return!!new URL(e).toString().match(s)}catch(e){}return!1}},56767:function(e,t,n){n.d(t,{A:function(){return r}});var a=n(30947);function r(e){let t="Unable to add Google Doc.";return e instanceof a.Hx&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},84344:function(e,t,n){n.d(t,{m:function(){return a},v:function(){return r}});let a=e=>"https://docs.google.com/document/d/".concat(e),r=e=>"https://outline.ant.dev/doc/".concat(e)},16282:function(e,t,n){n.d(t,{K3:function(){return z},PJ:function(){return F},TF:function(){return L},Xz:function(){return R},a9:function(){return T},ek:function(){return O},kD:function(){return G},mB:function(){return k},tK:function(){return C}});var a=n(27573),r=n(5161),s=n(96070),i=n(32737),l=n(84464),o=n(53949),c=n(30070),d=n(16963),u=n(11510),f=n(80151),h=n(55474),m=n(84773),x=n(10607),g=n(68425),p=n(7653),b=n(40950),v=n(45790),j=n(23529),y=n(26047),w=n(53186),_=n(32846),N=n(91887);let C=(0,p.forwardRef)((e,t)=>{let{size:n,onRemoveFile:r,isInteractive:s=!0,children:i,testId:l,className:o}=e;return(0,a.jsx)(g.E.div,{ref:t,"data-testid":l,className:(0,x.Z)("group/thumbnail relative inline-block p-0.5",s&&"cursor-pointer","auto"===n&&"h-full w-full",o),layout:"xxs"!==n&&"xs"!==n&&"lg"!==n&&"mdlg"!==n,...!!r&&M,children:i})});C.displayName="BaseThumbnail";let k=e=>{let{file:t,size:n,showWarnings:r,onRemoveFile:i,onClick:l,isInteractive:c=!0,isEditable:d}=e,[u,f]=(0,p.useState)(!1);if((0,s.b)())return"xxs"===n?(0,a.jsx)(N.yL,{file:t}):(0,a.jsx)(N.mB,{file:t,showWarnings:r,handleRemove:i,handleClick:l,isEditable:d});if("file_kind"in t)switch(t.file_kind){case o.Y.Image:return(0,a.jsx)(S,{isPreviewOpen:u,setIsPreviewOpen:f,file:t,size:n,showWarnings:r,onRemoveFile:i,onClick:l,isInteractive:c});case o.Y.Blob:return(0,a.jsx)(Z,{file:t,size:n,onRemoveFile:i,onClick:l,isInteractive:c});case o.Y.SanitizedDocument:return(0,a.jsx)(I,{file:t,size:n,onRemoveFile:i,onClick:l,isInteractive:c})}return(0,a.jsx)(A,{isPreviewOpen:u,setIsPreviewOpen:f,file:t,size:n,onRemoveFile:i,onClick:l,isInteractive:c})},M={initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:650,damping:25,mass:1,opacity:{ease:"linear",duration:.25}}},exit:{opacity:0,scale:.9,duration:.05,ease:"easeOut"}},S=e=>{let{file:t,size:n,showWarnings:r,onRemoveFile:s,onClick:c,isInteractive:d,isPreviewOpen:u,setIsPreviewOpen:f}=e,h=r&&(0,l.e)(t),m="lg"===n?t.preview_asset:t.thumbnail_asset,[b,v]=(0,p.useState)(!1),j="lg"===n?400:100,y="lg"===n?200:80,_=window.devicePixelRatio||1,N=m.image_width/_,C=m.image_height/_,k=1;return N>j&&(k=j/N),C*k>y&&(k=y/C),N*=k,C*=k,(0,a.jsxs)(g.E.div,{"data-testid":t.file_name,className:(0,x.Z)("group inline-block self-end flex-shrink-0",d&&"cursor-pointer","md"===n&&"h-20 w-28 border-border-300/20 hover:border-border-300/30 transition relative -mb-1 rounded-[0.625rem] border-2",h&&"border-warning-orange/95","lg"===n&&"rounded-lg shadow"),layout:"lg"!==n,...!!s&&M,children:[s&&(0,a.jsx)("div",{className:"absolute -top-0.5 left-0.5 z-10",children:(0,a.jsx)(L,{onRemoveFile:s})}),h&&(0,a.jsx)(E,{}),(0,a.jsx)(i.u,{tooltipContent:t.file_name,side:"bottom",children:(0,a.jsxs)("div",{className:(0,x.Z)("border-0.5 border-border-200 group-hover/thumbnail:border-border-100 relative overflow-hidden rounded-lg transition group-active/thumbnail:scale-[0.99]","md"===n&&"h-full w-full"),style:{backgroundColor:"#".concat(t.thumbnail_asset.primary_color)},children:[(0,a.jsx)(g.E.img,{initial:{opacity:0,scale:.985},animate:{opacity:b?1:0,scale:b?1:.985,transition:{ease:"easeOut",duration:.125,opacity:{duration:.25}}},className:(0,x.Z)("md"===n&&"h-full w-full object-cover"),alt:t.file_name,onDragStart:e=>e.preventDefault(),loading:"eager",onLoad:()=>v(!0),src:m.url,width:N,height:C}),(0,a.jsx)("link",{rel:"preload",as:"image",href:t.preview_asset.url}),d&&(0,a.jsx)("button",{className:"absolute inset-0 z-[1]",onClick:c||(()=>f(!0)),"data-testid":"file-thumbnail"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-b from-always-black/0 to-always-black/10"})]})}),t.file_kind===o.Y.Image&&(0,a.jsx)(w.e,{file:t,isOpen:u,onClose:()=>f(!1)})]})},E=()=>{let e=(0,b.Z)();return(0,a.jsx)(i.u,{tooltipContent:e.formatMessage({defaultMessage:"Attach a higher resolution image for better results",id:"VLPlC033NT"}),side:"bottom",children:(0,a.jsx)("div",{className:"bg-warning-orange/95 text-text-100 hover:text-text-000 absolute bottom-0 right-0 z-10 rounded-ee-md rounded-ss-md p-0.5 transition",children:(0,a.jsx)(c.v,{size:16})})})},z=e=>{let{size:t,isInteractive:n=!0,isError:r=!1}=e;return(0,a.jsxs)("div",{className:(0,x.Z)("group-hover/thumbnail:drop-shadow-sm pointer-events-none absolute inset-0 z-0 grid grid-rows-[auto_1fr] overflow-hidden transition transition-transform duration-100",n&&"group-active/thumbnail:scale-[0.99]"),children:[(0,a.jsxs)("div",{className:"relative z-[1] -mb-[0.5px] flex ",children:[(0,a.jsx)("div",{className:(0,x.Z)("border-border-200/30 border-l-0.5 border-t-0.5 group-hover/thumbnail:border-border-200 h-full w-full bg-always-white transition-colors duration-100","xxs"===t&&"rounded-tl","xs"===t&&"rounded-tl-md","xxs"!==t&&"xs"!==t&&"rounded-tl-lg")}),(0,a.jsxs)("svg",{viewBox:"0 0 16 16",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",className:(0,x.Z)("block flex-shrink-0 drop-shadow","xxs"===t?"h-2 w-2":"h-4 w-4"),children:[(0,a.jsx)("path",{d:"M0 0L16 16H0V0Z",className:"stroke-border-300/10 fill-always-white",strokeWidth:"0.5"}),(0,a.jsx)("path",{d:"M-1 -1L17 17",className:"group-hover/thumbnail:stroke-border-300 transition-colors duration-100",strokeWidth:"0.5"})]})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:(0,x.Z)("border-l-0.5 border-b-0.5 border-r-0.5 border-border-200/30 group-hover/thumbnail:border-border-200 absolute inset-0 bg-always-white bg-gradient-to-b from-always-white from-20% transition-colors duration-100",r?"to-danger-000/20":"to-accent-secondary-200/10","xxs"===t&&"rounded-b","xs"===t&&"rounded-b-md","xxs"!==t&&"xs"!==t&&"rounded-b-lg")})})]})},D=e=>{let{file_name:t,size:n}=e;return(0,a.jsx)(a.Fragment,{children:"xxs"!==n&&"xs"!==n&&(0,a.jsx)("div",{style:{transform:"translate3d(0,0,0)"},className:(0,x.Z)("text-accent-secondary-200 pointer-events-none relative z-[1] flex-1 break-words px-2.5 text-center leading-tight tracking-tight",("md"===n||"auto"===n)&&"mb-1 line-clamp-3 px-2.5 text-[0.85rem] font-semibold leading-[0.825rem] tracking-tighter","lg"===n&&"line-clamp-4 px-3 pt-6 text-sm font-semibold"),children:T(t)})})},F=e=>{let{fileExtension:t,size:n,extensionAccessory:r,className:s,externalDocument:i=!1}=e;return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:(0,x.Z)("inline-flex max-w-full items-center transition-all",("xxs"===n||"xs"===n)&&"relative z-[1] pt-0.5 text-accent-secondary-100","xxs"===n&&"text-[0.4rem] tracking-tighter","xs"===n&&"text-[0.5rem] tracking-normal",("md"===n||"mdlg"===n||"lg"===n)&&"group-hover/thumbnail:bg-always-white/80 transition bg-always-white/90 backdrop-blur border-border-200/30 border-0.5 shadow-sm text-always-black/70 inline-block rounded-full px-1.5 py-[0.125rem] text-[0.625rem] tracking-normal","md"===n&&"absolute left-1/2 top-full z-10 -mt-1 -translate-x-1/2 -translate-y-1/2","mdlg"===n&&"relative z-[1] mb-3","lg"===n&&"relative z-[1] mb-4",s),children:[(0,a.jsx)("div",{className:"uppercase font-bold line-clamp-1 truncate",children:t}),r,i&&(0,a.jsx)(d.G,{size:12,className:"ml-1 group-hover/thumbnail:opacity-70 opacity-0 w-0 group-hover/thumbnail:w-3 scale-50 group-hover/thumbnail:scale-100 transition-all"})]})})},Z=e=>{let{file:t,size:n,onClick:r,isInteractive:s,onRemoveFile:l}=e,[o,c]=(0,p.useState)(!1),d=t.file_name.split("."),f=d.length>1?d[d.length-1]:null,h=s?t.file_name:null,m=f?(0,a.jsx)(v.Z,{defaultMessage:"Claude can analyze {fileExtension} files with the analysis tool.",id:"zk0dac6GGP",values:{fileExtension:f.toUpperCase()}}):(0,a.jsx)(v.Z,{defaultMessage:"Claude can analyze this file with the analysis tool.",id:"gbe6qXNZjr"});return(0,a.jsxs)(C,{size:n,onRemoveFile:l,isInteractive:s,testId:t.file_name,children:[l&&(0,a.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,a.jsx)(L,{onRemoveFile:l})}),(0,a.jsx)(j.y,{isOpen:o,setIsOpen:c,fileName:t.file_name,fileUuid:t.file_uuid}),(0,a.jsxs)(O,{size:n,onClick:r||(s?()=>c(!0):void 0),children:[(0,a.jsx)(z,{size:n}),(0,a.jsx)(D,{file_name:t.file_name,size:n}),(0,a.jsx)(i.u,{tooltipContent:h,side:"bottom",children:(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-5"})}),f&&(0,a.jsx)(F,{fileExtension:f,size:n,extensionAccessory:"lg"===n||"md"===n?(0,a.jsxs)("div",{className:"inline-flex ml-1 -my-0.5 -mr-1.5 rounded-r-full",children:[(0,a.jsx)("div",{className:"inline-block w-[0.5px] bg-always-black/20 rounded-b"}),(0,a.jsx)(i.u,{tooltipContent:m,side:"bottom",children:(0,a.jsx)("span",{className:"inline-flex items-center gap-1  pl-1.5 pr-2 rounded-r-full group/large transition",children:(0,a.jsx)(u.k,{weight:"bold",className:"opacity-80",size:12})})})]}):null})]})]})},I=e=>{let{file:t,size:n,onClick:r,isInteractive:s,onRemoveFile:l}=e,[o,c]=(0,p.useState)(!1),d=t.file_name.split("."),u=d.length>1?d[d.length-1]:null,f=s?t.file_name:null;return(0,a.jsxs)(C,{size:n,onRemoveFile:l,isInteractive:s,testId:t.file_name,children:[l&&(0,a.jsx)("div",{className:"absolute left-1 top-1 z-10 group",children:(0,a.jsx)(L,{onRemoveFile:l})}),(0,a.jsx)(_.i,{isOpen:o,setIsOpen:c,documentFile:t}),(0,a.jsxs)(O,{size:n,onClick:r||(s?()=>c(!0):void 0),children:[(0,a.jsxs)("div",{className:"absolute h-full w-full rounded-[0.625rem] mt-0.5 border-2 border-border-300/20 group-hover/thumbnail:border-border-300/30 transition overflow-hidden",children:[(0,a.jsx)(g.E.img,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{ease:"easeOut",duration:.125,opacity:{duration:.25}}},className:(0,x.Z)("md"===n&&"h-full w-full object-cover object-top top-0 border-0.5 border-border-200 group-hover/thumbnail:border-border-100 transition rounded-lg"),alt:t.file_name,onDragStart:e=>e.preventDefault(),loading:"eager",src:t.thumbnail_asset.url,width:t.thumbnail_asset.image_width,height:t.thumbnail_asset.image_height}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-b from-always-black/0 to-always-black/10"})]}),(0,a.jsx)("div",{className:"h-full w-full",children:" "}),(0,a.jsx)(i.u,{tooltipContent:f,side:"bottom",children:(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 -bottom-0"})}),u&&(0,a.jsx)(F,{fileExtension:u,size:n})]})]})},A=e=>{let{file:t,size:n,onClick:s,isInteractive:l,onRemoveFile:o,isPreviewOpen:c,setIsPreviewOpen:d}=e,f=P(t)?(0,a.jsx)(v.Z,{defaultMessage:"Pasted Text",id:"scniiadfth"}):t.file_name,h=t.extracted_content.split("\n").length,m=l?(0,a.jsx)(v.Z,{id:"L7ArvWNpMR",defaultMessage:"{filename} \xb7 {lineCount, plural, one {# line} other {# lines}}",values:{filename:f,lineCount:h}}):null;return(0,a.jsxs)(C,{size:n,onRemoveFile:o,isInteractive:l,testId:t.file_name,children:[o&&(0,a.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,a.jsx)(L,{onRemoveFile:o})}),(0,a.jsx)(y.J,{file:t,isOpen:c,onClose:()=>d(!1)}),(0,a.jsx)(i.u,{className:"text-center",tooltipContent:m,side:"bottom",children:(0,a.jsx)("div",{children:(0,a.jsxs)(O,{size:n,onClick:s||(l?()=>d(!0):void 0),testId:"file-thumbnail",children:[(0,a.jsx)(z,{size:n}),P(t)?(0,a.jsx)("div",{className:(0,x.Z)("fade-out-bottom text-accent-secondary-100 pointer-events-none visible relative z-[1] h-full overflow-hidden break-words text-left leading-tight tracking-tighter opacity-70",("md"===n||"auto"===n)&&"px-3.5 pt-3.5 text-[0.5rem] font-semibold","lg"===n&&"px-3 pt-5 text-[0.5rem] font-semibold"),children:t.extracted_content.substring(0,200)}):(0,a.jsx)(D,{file_name:t.file_name,size:n}),(0,a.jsx)(F,{fileExtension:function(e){if(P(e))return"pasted";if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";{if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,r.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}(t),size:n,extensionAccessory:"pdf"===t.file_type&&(0,a.jsx)(i.u,{tooltipContent:"PDF converted to text",side:"bottom",children:(0,a.jsxs)("div",{className:"inline-flex ml-1",children:[(0,a.jsx)("div",{className:"inline-block w-[0.5px] bg-border-300"}),(0,a.jsx)(u.k,{className:"ml-1.5 mr-0.5",weight:"bold",size:12})]})})})]})})})]})};function L(e){let{onRemoveFile:t}=e,n=(0,b.Z)();return(0,a.jsx)("button",{className:"border-0.5 border-border-200 text-text-500 bg-bg-000 hover:bg-danger-100 hover:text-oncolor-100 -translate-x-1/2 -translate-y-1/2 rounded-full p-1 transition hover:scale-105",onClick:t,"aria-label":n.formatMessage({defaultMessage:"Remove file",id:"hgAzMVK+jq"}),children:(0,a.jsx)(f.X,{size:12,weight:"bold"})})}function P(e){return e.file_name.match(/paste(-\d+)?\.txt/)}function T(e){let t=e.match(/\.[^/.]+$/);return t&&(0,r.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}function O(e){let{size:t,children:n,isInteractive:r=!0,testId:s,classname:i,...l}=e,o=(0,x.Z)("relative grid grid-rows-[1fr_auto] items-center","xxs"===t&&"h-7 w-[1.625rem]","xs"===t&&"h-10 w-10","md"===t&&"h-20 w-28","mdlg"===t&&"h-[120px] w-[120px]","lg"===t&&"h-36 w-32 drop-shadow-sm","auto"===t&&"h-full w-full",i);return l.href?(0,a.jsx)("a",{"data-testid":s,target:"_blank",className:o,href:l.href,children:n}):(0,a.jsx)("button",{"data-testid":s,disabled:!r,className:o,onClick:l.onClick,children:n})}let R=()=>(0,s.b)()?(0,a.jsx)(N.vQ,{title:"Images hidden in shared chats",isError:!0}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg bg-bg-300/80 h-36 w-56 px-6 py-3",children:[(0,a.jsx)(h.f,{size:24,className:"text-text-500"}),(0,a.jsx)("div",{className:"text-text-500 text-sm text-center mt-2",children:(0,a.jsx)(v.Z,{defaultMessage:"Images are not supported in shared chats",id:"vmTlLHPu8j"})})]}),G=()=>(0,s.b)()?(0,a.jsx)(N.vQ,{title:"Files hidden in shared chats",isError:!0}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg bg-bg-300/80 h-36 w-56 px-6 py-3",children:[(0,a.jsx)(m.h,{size:24,className:"text-text-500"}),(0,a.jsx)("div",{className:"text-text-500 text-sm text-center mt-2",children:(0,a.jsx)(v.Z,{defaultMessage:"Files are not supported in shared chats",id:"8u6r5ZY4A7"})})]})},91887:function(e,t,n){n.d(t,{eI:function(){return D},fz:function(){return R},l1:function(){return B},mB:function(){return F},vQ:function(){return T},yL:function(){return O}});var a=n(56683),r=n(27573),s=n(5161),i=n(5984),l=n(9788),o=n(10571),c=n(32737),d=n(84464),u=n(1133),f=n(53949),h=n(30070),m=n(80151),x=n(10607),g=n(68425),p=n(7583),b=n(7653),v=n(45790),j=n(23529),y=n(26047),w=n(53186),_=n(32846),N=n(41198);function C(){let e=(0,a._)(["\n  min-w-0\n  h-[18px] \n  flex \n  flex-row \n  items-center \n  justify-center\n  gap-0.5\n  px-1 \n  border-0.5\n  border-border-300/25\n  shadow-sm\n  rounded\n  bg-bg-000/70\n  backdrop-blur-sm\n  font-medium\n"]);return C=function(){return e},e}function k(e){return e.file_name.match(/paste(-\d+)?\.txt/)}function M(e){if("file_kind"in e){let t=e.file_name.split(".");return t.length>1?t[t.length-1]:void 0}if(k(e))return"pasted";if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";{if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,s.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}let S=e=>{let{handleClick:t,isInSelectionMode:n,handleSelect:a}=e,[r,s]=(0,b.useState)(!1);return{onClick:()=>{n&&a?a(!0,!1):t?t():s(!0)},isPreviewOpen:r,setIsPreviewOpen:s}},E={icon:{height:28,width:28},normal:{height:120,width:120},stretch:{height:120,width:"100%"}},z=e=>e&&E[e]?E[e]:E.normal,D=e=>{let{domain:t,faviconUrl:n,...a}=e,s=(0,r.jsx)(V,{faviconUrl:n,domain:t});return(0,r.jsx)(T,{tag:s,...a})},F=e=>{let{file:t,isEditable:n,showWarnings:a,...s}=e;if("file_kind"in t)switch(t.file_kind){case f.Y.Image:return(0,r.jsx)(Z,{...s,file:t,showWarnings:a,isEditable:n});case f.Y.Blob:return(0,r.jsx)(I,{...s,file:t,isEditable:n});case f.Y.SanitizedDocument:return(0,r.jsx)(L,{...s,file:t,isEditable:n})}return(0,r.jsx)(A,{...s,file:t,isEditable:n})},Z=e=>{let{size:t,file:n,showWarnings:a,handleRemove:s,handleClick:i,isSelected:l,handleSelect:o,isInSelectionMode:c,isEditable:u}=e,{height:f,width:h}=z(t),{onClick:m,isPreviewOpen:x,setIsPreviewOpen:g}=S({handleClick:i,isInSelectionMode:c,handleSelect:o}),p=a&&(0,d.e)(n);return(0,r.jsxs)("div",{className:"relative group/thumbnail ",children:[(0,r.jsxs)("div",{"data-testid":n.file_name,style:{width:h,height:f,minWidth:h,minHeight:f},className:"cursor-pointer rounded-lg overflow-hidden",children:[(0,r.jsx)(P,{"data-testid":"file-thumbnail",width:h,height:f,fileName:n.file_name,src:n.preview_asset.url,onClick:m}),(0,r.jsx)(H,{isAbsolute:!0,right:p?(0,r.jsx)(Y,{type:"warning",tooltipText:"Attach a higher resolution image for better results"}):void 0,isSelected:l,handleSelect:o,isEditable:u}),(0,r.jsx)(w.e,{file:n,isOpen:x,onClose:()=>g(!1)}),(0,r.jsx)("div",{className:"transition-colors absolute pointer-events-none top-0 left-0 right-0 bottom-0 rounded-lg shadow-always-white/40 group-hover/thumbnail:shadow-always-white/60 shadow-[inset_0_0_0_2px_var(--tw-shadow-color)]"})]}),(0,r.jsx)(K,{handleRemove:s,isEditable:u,isInSelectionMode:c})]})},I=e=>{let{file:t,handleClick:n,...a}=e,{onClick:s,isPreviewOpen:i,setIsPreviewOpen:l}=S({handleClick:n,isInSelectionMode:a.isInSelectionMode,handleSelect:a.handleSelect}),o=M(t);return(0,r.jsxs)("div",{children:[(0,r.jsx)(T,{...a,"data-testid":t.file_name,title:t.file_name,handleClick:s,tag:!!o&&(0,r.jsx)(W,{tagName:o,tooltipText:o?"Claude can analyze ".concat(o.toUpperCase()," files with the analysis tool."):"Claude can analyze this file with the Analysis tool."})}),(0,r.jsx)(j.y,{isOpen:i,setIsOpen:l,fileName:t.file_name,fileUuid:t.file_uuid})]})},A=e=>{let{file:t,handleClick:n,...a}=e,{onClick:s,isPreviewOpen:i,setIsPreviewOpen:l}=S({handleClick:n,isInSelectionMode:a.isInSelectionMode,handleSelect:a.handleSelect}),o=k(t),c=o?"Pasted Text":t.file_name,d=t.extracted_content.split("\n").length,u=(0,r.jsx)(v.Z,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:d}}),f=t.extracted_content.substring(0,300),h=M(t);return(0,r.jsxs)("div",{children:[(0,r.jsx)(T,{...a,"data-testid":t.file_name,...o?{text:f}:{title:c,subtitle:u},handleClick:s,tag:!!h&&(0,r.jsx)(W,{tagName:h,tooltipText:"pdf"===t.file_type?"PDF converted to text":void 0})}),(0,r.jsx)(y.J,{file:t,isOpen:i,onClose:()=>l(!1)})]})},L=e=>{let{size:t,file:n,handleRemove:a,handleClick:s,isSelected:i,handleSelect:l,isInSelectionMode:o,isEditable:c}=e,{height:d,width:u}=z(t),{onClick:f,isPreviewOpen:h,setIsPreviewOpen:m}=S({handleClick:s,isInSelectionMode:o,handleSelect:l}),x=M(n);return(0,r.jsxs)("div",{className:"group/thumbnail relative",children:[(0,r.jsxs)("div",{"data-testid":n.file_name,style:{width:u,height:d,minWidth:u,minHeight:d},className:"cursor-pointer rounded-lg overflow-hidden border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 hover:border-border-200/50 hover:shadow-always-black/10",children:[(0,r.jsx)(P,{width:"100%",height:"100%",fileName:n.file_name,src:n.thumbnail_asset.url,onClick:f}),(0,r.jsx)(H,{isSelected:i,handleSelect:l,isAbsolute:!0,left:x?(0,r.jsx)(W,{tagName:x}):void 0,isEditable:c}),(0,r.jsx)(_.i,{isOpen:h,setIsOpen:m,documentFile:n})]}),(0,r.jsx)(K,{handleRemove:a,isEditable:c,isInSelectionMode:o})]})},P=e=>{let{width:t,height:n,fileName:a,src:s,onClick:i}=e,[l,o]=(0,b.useState)(!1);return(0,r.jsx)("div",{className:"relative bg-bg-000",style:{width:t,height:n},children:(0,r.jsx)("img",{className:(0,x.Z)("w-full h-full object-cover transition duration-400",l?"opacity-1":"opacity-0 blur-sm"),onLoad:()=>o(!0),alt:a,src:s,onDragStart:e=>e.preventDefault(),onClick:i})})},T=e=>{let{size:t,url:n,handleClick:a,title:s,subtitle:i,text:l,isLoading:o=!1,tag:c,actions:d,isError:u,handleRemove:f,isEditable:h,isSyncing:m,handleSelect:p,isSelected:b,isInSelectionMode:v}=e,{height:j,width:y}=z(t),w=(0,r.jsxs)(g.E.div,{className:"group/thumbnail relative",whileHover:h?"actionsVisible":m||v?"actionsVisible":void 0,animate:v||m?"actionsVisible":"initial","data-testid":"file-thumbnail",children:[(0,r.jsxs)("div",{style:{width:y,height:j,minWidth:y},className:(0,x.Z)("font-styrene transition-all rounded-lg border-0.5 border-border-300/25 flex flex-col justify-between gap-2.5 overflow-hidden px-2.5 py-2",u?"bg-danger-200/5":o?"bg-bg-100":"bg-bg-000",!!(n||a)&&!o&&"hover:border-border-200/50 hover:shadow-always-black/10",!o&&"shadow-sm shadow-always-black/5"),children:[(0,r.jsxs)("div",{className:"relative flex flex-col gap-1 min-h-0",children:[l?(0,r.jsx)("div",{className:"max-w-full overflow-hidden absolute h-[112px] [mask-image:linear-gradient(to_bottom,hsl(var(--always-black)/80%)_0%,_hsl(var(--always-black)/10%)_100%)]",children:(0,r.jsx)(g.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-[8px] text-text-100 break-words",children:l})}):u||s&&!o?(0,r.jsx)(g.E.h3,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:(0,x.Z)("text-[12px] tracking-tighter break-words",u?"text-text-500":"text-text-100",i?"line-clamp-3":"line-clamp-4"),children:s}):(0,r.jsx)(G,{}),!!i&&!o&&!u&&(0,r.jsx)(g.E.p,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:"text-[10px] line-clamp-1 tracking-tighter break-words text-text-500",children:i})]}),o?(0,r.jsx)(U,{}):(0,r.jsx)(H,{isSelected:b,handleSelect:p,left:c,right:u&&(0,r.jsx)(Y,{type:"error"}),actions:d,isEditable:h})]}),(0,r.jsx)(K,{handleRemove:f,isEditable:h,isInSelectionMode:v})]});return a?(0,r.jsx)("div",{className:"cursor-pointer",onClick:a,children:w}):n?(0,r.jsx)("a",{href:n,target:"_blank",children:w}):w},O=e=>{let{file:t}=e,n=M(t);return(0,r.jsx)("div",{className:"w-[38px] h-[38px] min-w-[38px] font-styrene rounded-lg border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 flex items-center justify-center overflow-hidden bg-bg-000",children:!!n&&(0,r.jsx)("p",{className:"font-bold uppercase font-styrene text-text-300 text-[9px] tracking-tighter pt-0.5",children:n})})},R=e=>{let{size:t,tag:n,isShown:a=!0}=e,{width:s}=z(t);return(0,r.jsx)(p.M,{children:!!a&&(0,r.jsx)(g.E.div,{initial:{opacity:0,maxWidth:0},animate:{opacity:1,maxWidth:s},children:(0,r.jsx)(T,{isLoading:!0,tag:n,size:t})})})},G=()=>(0,r.jsxs)(g.E.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full flex flex-col",children:[(0,r.jsx)(o.g,{width:"100%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"}),(0,r.jsx)(o.g,{width:"66%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})]}),U=()=>(0,r.jsx)(g.E.div,{initial:{opacity:0},animate:{opacity:1},children:(0,r.jsx)(o.g,{width:"48px",height:"18px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})}),B=l.q.div(C()),H=e=>{let{isAbsolute:t=!1,left:n,right:a,actions:s,handleSelect:l,isSelected:o,isEditable:c}=e,d=!!n,u=!!a||!!l;return d||u?(0,r.jsx)("div",{className:(0,x.Z)(t&&"absolute bottom-2 left-0 right-0 px-2.5 overflow-x-hidden overflow-y-visible"),children:(0,r.jsxs)("div",{className:(0,x.Z)("relative flex flex-row items-center gap-1",u&&!d?"justify-end":"justify-between"),children:[d&&(0,r.jsx)(g.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-row gap-1 shrink min-w-0",children:n}),u&&(0,r.jsxs)("div",{className:"flex flex-row gap-1 shrink-0",children:[a,!!l&&!!c&&(0,r.jsxs)(g.E.div,{variants:{actionsVisible:{opacity:1,position:"relative"},initial:{opacity:0,position:"absolute"}},className:"flex flex-row gap-1 h-[18px] right-0 top-0",onClick:e=>e.stopPropagation(),transition:{ease:"easeOut",duration:.2},children:[s,(0,r.jsx)(i.XZ,{checked:o,onChange:l,label:"Select file",hideLabel:!0,className:(0,x.Z)("!w-[18px] !h-[18px] -mt-1 !border-0.5 !border-border-300/25 !shadow-sm !rounded"),checkmarkClassName:"!w-3 !h-3"})]})]})]})}):null},V=e=>{let{faviconUrl:t,domain:n}=e;return(0,r.jsxs)(B,{className:"font-normal",children:[!!t&&(0,r.jsx)(N.c,{faviconUrl:t}),(0,r.jsx)("p",{className:"truncate font-styrene text-text-500 text-[11px] leading-[13px]",children:n})]})},W=e=>{let{tagName:t,tooltipText:n,className:a}=e,s=(0,r.jsx)(B,{className:a,children:(0,r.jsx)("p",{className:"uppercase truncate font-styrene text-text-300 text-[11px] leading-[13px]",children:t})});return n?(0,r.jsx)(c.u,{tooltipContent:n,children:s}):s},Y=e=>{let{type:t,tooltipText:n,className:a}=e,s=(0,r.jsx)(B,{className:(0,x.Z)("shrink-0","error"===t?"text-danger-000 border-danger-200/50 bg-danger-900":"text-warning-orange border-warning-orange/50 bg-bg-000/70",a),children:(0,r.jsx)(h.v,{size:12})});return n?(0,r.jsx)(c.u,{tooltipContent:n,children:s}):s},K=e=>{let{handleRemove:t,isEditable:n,isInSelectionMode:a}=e;return t&&n&&!a?(0,r.jsx)(c.u,{tooltipContent:(0,r.jsx)(v.Z,{defaultMessage:"Remove",id:"G/yZLul6P1"}),side:"bottom",children:(0,r.jsx)("button",{className:(0,x.Z)("transition-all hover:bg-bg-000/50 text-text-500 hover:text-text-200 group-hover/thumbnail:opacity-100 opacity-0 w-5 h-5 absolute -top-2 -left-2 rounded-full border-0.5 border-border-300/25 bg-bg-000/90 backdrop-blur-sm flex items-center justify-center",(0,u.tq)()&&"!opacity-100 !bg-bg-000/50"),onClick:e=>{e.stopPropagation(),e.preventDefault(),t()},children:(0,r.jsx)(m.X,{size:12,weight:"bold"})})}):null}},26525:function(e,t,n){n.d(t,{Ch:function(){return E},H0:function(){return U},Qe:function(){return k},Qt:function(){return I},Vn:function(){return T},kR:function(){return L},kS:function(){return D},sE:function(){return Z}});var a=n(56683),r=n(27573),s=n(5161),i=n(28266),l=n(76220),o=n(3053),c=n(5362),d=n(27218),u=n(27895),f=n(9788),h=n(32737),m=n(30947),x=n(6385),g=n(14448),p=n(35807),b=n(42755),v=n(45144),j=n(7653),y=n(45790),w=n(40950),_=n(41496),N=n(1804);function C(){let e=(0,a._)(["\n  relative\n  grid\n  place-content-center\n  aspect-square\n  rounded-xl\n  cursor-pointer\n  transition\n  [fieldset:not(:disabled)_&]:hover:bg-bg-400\n  [fieldset:disabled_&]:opacity-50\n  [fieldset:disabled_&]:pointer-events-none\n  focus-within:ring\n  inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  ring-offset-2\n  ring-offset-bg-300\n  ring-accent-main-100\n  focus-visible:outline-none\n  focus-visible:ring-1\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none\n  bg-[radial-gradient(ellipse,_var(--tw-gradient-stops))]\n  from-bg-500/10\n  from-50%\n  to-bg-500/30\n  border-0.5\n  border-border-400\n  font-medium\n  font-styrene\n  text-text-100/90\n  transition-colors\n  active:bg-bg-500/50\n  hover:text-text-000\n  hover:bg-bg-500/60\n"]);return C=function(){return e},e}let k=20,M=e=>{let t=e.webkitRelativePath;return t&&t.length?t:e.name},S=e=>e.replace(/\0/g,""),E=e=>{e.extracted_content=S(e.extracted_content),e.file_name=S(e.file_name),e.file_type=S(e.file_type)},z=(e,t)=>({file_name:M(e),file_type:e.type,file_size:e.size,extracted_content:t});function D(e){let{syncSourceCount:t,files:n,setFiles:a,numExistingConversationFiles:o,attachments:c,setAttachments:d,numExistingConversationAttachments:f,detectSameAttachment:m,selectedModel:x,blobFileUploadsEnabled:g}=e,{addError:v}=(0,u.e)(),_=(0,i.wN)(null);return function(e){let{syncSourceCount:t,onUploadComplete:n,existingAttachments:a,existingFiles:i,numExistingConversationAttachments:o,numExistingConversationFiles:c,selectedModel:d,blobFileUploadsEnabled:u}=e,f=(0,w.Z)(),{modelConfig:m}=(0,l.V)(d),x=m.image_in,[g,v,_,N]=function(e){let{syncSourceCount:t,onUploadComplete:n,existingAttachments:a,existingFiles:i,numExistingConversationFiles:o,selectedModel:c,blobFileUploadsEnabled:d}=e,{modelConfig:u}=(0,l.V)(c),f=u.image_in,h=U()&&u.pdf_in,{isUploading:m,setIsUploading:x,handleError:g,handleUpload:p}=T({imagesEnabled:f,blobFileUploadsEnabled:d,onUploadComplete:n,rasterizePdfUploadsEnabled:h}),b=(0,j.useCallback)(e=>{let{newUploads:n=[],numNewPotentialAttachments:l=0,showError:c=!0}=e,{attachmentUploads:u,imageUploads:m,rasterizedDocumentUploads:x,outOfContextFileUploads:p}=(0,s.Jw)(n,{imagesEnabled:f,blobFileUploadsEnabled:d,rasterizePdfUploadsEnabled:h});return l+u.length+m.length+x.length+p.length+a.length+i.length+t>k?(c&&g((0,r.jsx)(y.Z,{defaultMessage:"You can add at most {count, plural, one {# attachment} other {# attachments}} to a message. Please select fewer attachments.",id:"qxV00r12ob",values:{count:k}})),!1):!(m.length+x.length+i.length+o>100)||(c&&g((0,r.jsx)(y.Z,{defaultMessage:"You can add at most {count, plural, one {# file} other {# files}} to a chat. {suggestion}",id:"QyrCxYs5Jy",values:{count:100,suggestion:o<100?(0,r.jsx)(y.Z,{defaultMessage:"Please select fewer files.",id:"a6KVizNPLe"}):(0,r.jsx)(y.Z,{defaultMessage:"Please consider starting a new chat.",id:"oN0R8lZNm6"})}})),!1)},[f,d,a,i,t,o,g,h]);return[m,x,b,(0,j.useCallback)(async e=>{b({newUploads:e})&&await p(e)},[p,b])]}({syncSourceCount:t,onUploadComplete:n,existingFiles:i,existingAttachments:a,numExistingConversationFiles:c,numExistingConversationAttachments:o,selectedModel:d,blobFileUploadsEnabled:u}),C=function(e){let{handleUpload:t}=e,n=(0,j.useRef)({ready:0,total:0}),a=(0,j.useCallback)(()=>{n.current={ready:0,total:0}},[]),r=(0,j.useCallback)(e=>{n.current.ready+=1,n.current.total===n.current.ready&&t(e)},[t]),s=(0,j.useCallback)((e,t)=>{let a=e.length;for(let i=0;i<a;i++){let a=e[i];a.isFile?(n.current.total+=1,a.file(e=>{t.push(e),r(t)})):a.isDirectory&&a.createReader().readEntries(e=>{s(e,t)})}},[r]);return(0,j.useCallback)(e=>{var t;e.preventDefault(),a();let n=null===(t=e.dataTransfer)||void 0===t?void 0:t.items;if(!n)return;let r=[];for(let e=0;e<(null==n?void 0:n.length);e++){let t=n[e].webkitGetAsEntry();t&&r.push(t)}s(r,[])},[s,a])}({handleUpload:N}),M=(0,j.useCallback)(async e=>{await N(Array.from(e))},[N]),S=(0,j.useCallback)(async e=>{let t=e.target.files;t&&await N(Array.from(t)),e.target.value=""},[N]),E=x?(0,r.jsx)(y.Z,{defaultMessage:"Upload docs or images to Claude\\n(Max {maxUploads}, 30mb each)",id:"ialBpH0eLp",values:{maxUploads:k}}):(0,r.jsx)(y.Z,{defaultMessage:"Add content ({maxUploads} max, 30mb each)\\nAccepts pdf, txt, csv, etc.",id:"70asB5brJP",values:{maxUploads:k}}),z=(0,j.useCallback)(e=>{S(e)},[S]),D=(0,j.useMemo)(()=>({type:"file",accept:(0,s.tB)({imagesEnabled:x,outOfContextFilesEnabled:u}).join(","),onChange:z,multiple:!0,"aria-label":f.formatMessage({defaultMessage:"Upload files",id:"2jjdVzJX0c"})}),[u,x,z,f]);return[g,v,_,C,M,N,(0,r.jsx)(h.u,{className:"text-center",tooltipContent:E,children:(0,r.jsxs)(O,{children:[(0,r.jsx)("input",{"data-testid":"file-upload",className:"absolute inset-0 -z-10 overflow-hidden rounded-xl opacity-0",...D}),g?(0,r.jsx)(p.U,{className:"animate-spin",size:18}):(0,r.jsx)(b.p,{size:18,weight:"light"})]})},"upload-tooltip"),D]}({syncSourceCount:t,onUploadComplete:(0,j.useCallback)(async(e,t)=>{m&&e.find(e=>m(e.extracted_content))&&v((0,r.jsx)(y.Z,{defaultMessage:"The same attachment was already added earlier. Claude sees the full conversation when replying, so there’s no need to re-upload.",id:"Uo3qvhGn7z"})),d(t=>[...t,...e]),a(e=>[...e,...t])},[d,m,v,a]),existingAttachments:c,existingFiles:n,numExistingConversationAttachments:f,numExistingConversationFiles:o,selectedModel:null!=x?x:_,blobFileUploadsEnabled:g})}let F=async(e,t,n)=>{let a=new Image;if(a.src=URL.createObjectURL(e),await new Promise(e=>{a.onload=e,setTimeout(e,250)}),!a.width||!a.height||"image/png"!==e.type&&a.width<=t&&a.height<=n)return e;let r=a.width/a.height,s=a.width,i=a.height;a.width>t&&(i=(s=t)/r),i>n&&(s=(i=n)*r);let l=document.createElement("canvas");l.style.display="none",document.body.appendChild(l);let o=l.getContext("2d");if(!o||!o.imageSmoothingQuality)return document.body.removeChild(l),e;o.imageSmoothingQuality="high",l.width=s,l.height=i,o.drawImage(a,0,0,s,i);let c=await new Promise(e=>{l.toBlob(t=>e(t),"image/webp",.85)});return(document.body.removeChild(l),c)?new File([c],e.name,{type:"image/webp"}):e},Z=()=>{let{value:e}=(0,g.F)("use_canvas_resize");return(0,j.useCallback)(async t=>e?await F(t,2e3,2e3):t,[e])},I=()=>{let e=G(),t=L();return async(n,a,r)=>{try{return await t(n,a,r)}catch(t){e(t,(0,s.Wr)(n)?"image":"file")}}},A=e=>{let t=G(),n=L(),a=(0,c.OJ)();return async(r,s,i)=>{let l={};try{l.file=await n(r,s,i)}catch(n){n instanceof m.Hx&&"document_too_many_pages"===n.errorCode?l.attachment=await R(a,r,s,e):t(n,"document")}return l}},L=()=>{let e=(0,c.OJ)();return async(t,n,a)=>{let r=new FormData;r.append("file",t);let s=a?"/api/organizations/".concat(n,"/projects/").concat(a,"/upload"):"/api/".concat(n,"/upload"),i=await e(s,{method:"POST",body:r}),l=await i.json();if(i.ok)return l;throw(0,m.fT)(i.status,l,"File upload failed",i.headers)}},P=async(e,t,n,a)=>{let s;let i=new FormData;i.append("file",t);try{s=await e("/api/organizations/".concat(n,"/convert_document"),{method:"POST",body:i})}catch(e){return(0,v.Tb)(e),a((0,r.jsx)(y.Z,{defaultMessage:"One or more file uploads have failed. Please try again.",id:"FIwcYDeyIC"}))}if(429===s.status)return a((0,r.jsx)(y.Z,{defaultMessage:"Too many file upload attempts. Please wait and try again later.",id:"h/6cMHSn1V"}));if(413===s.status)return a((0,r.jsx)(y.Z,{defaultMessage:"Uploaded file is too large. Try uploading a smaller part of the document, or copy/pasting an excerpt from the file.",id:"/mCoauj3Ws"}));if(!s.ok)return a((0,r.jsx)(y.Z,{defaultMessage:"Text extraction failed for one of the uploaded files. Please try again.",id:"ngYPeW4aWf"}));let l=await s.json();return l&&0!==Object.keys(l).length&&l.extracted_content?(l.file_name=M(t),l):a((0,r.jsx)(y.Z,{defaultMessage:"Text extraction failed for one of the uploaded files. Please try again.",id:"ngYPeW4aWf"}))},T=e=>{var t;let{imagesEnabled:n,blobFileUploadsEnabled:a,rasterizePdfUploadsEnabled:i,onUploadComplete:l,onError:f,projectUuid:h}=e,{activeOrganization:m}=(0,d.t)(),g=null!==(t=null==m?void 0:m.uuid)&&void 0!==t?t:"",[p,b]=(0,j.useState)(!1),{addError:v}=(0,u.e)(),w=(0,j.useCallback)(e=>{b(!1),v(e),f&&f()},[v,f,b]),N=Z(),C=I(),k=A(w),M=(0,c.OJ)(),S=(0,o.z$)(),E=(0,j.useCallback)(async(e,t)=>{let{attachmentUploads:o,imageUploads:c,rasterizedDocumentUploads:d,unsupportedUploads:u,tooLargeUploads:f,outOfContextFileUploads:m}=(0,s.Jw)(e,{imagesEnabled:n,blobFileUploadsEnabled:a,rasterizePdfUploadsEnabled:i}),p=u.map(e=>(0,s.mD)(e.name));if(p.length>0)return w((0,r.jsx)(y.Z,{defaultMessage:"Files of the following {count, plural, one {format is} other {formats are}} not supported: {formats}",id:"9JcWWPAZoB",values:{count:p.length,formats:(0,r.jsx)(_.yX,{type:"conjunction",value:[...new Set(p)]})}}));if(f.length>0)return S.track({event_key:"file_upload_too_large",large_files:f.map(e=>({file_type:e.type,file_size:e.size}))}),w((0,r.jsx)(y.Z,{defaultMessage:"You may not upload files larger than 30mb.",id:"Gr/GvEZTX1"}));b(!0);let v=[],j=0,E=(e,n)=>{if(void 0===t)return!0;let a=new Blob([n]).size/x.r6;return!((j+=a)>t)||(w((0,r.jsx)(y.Z,{defaultMessage:"Failed to upload file {filename}. Project knowledge exceeds maximum. Remove files to continue.",id:"MbvF6K3PJd",values:{filename:e}})),!1)};for(let e of o){let t=await R(M,e,g,w);if(!(t&&E(e.name,t.extracted_content)))return;await l([t],[])}for(let e of c){let t=await N(e),n=await C(t,g,h);n&&v.push(n)}for(let e of d){let{file:t,attachment:n}=await k(e,g,h);if(t&&v.push(t),n){if(!E(e.name,n.extracted_content))return;await l([n],[])}}for(let e of m){let t=await C(e,g,h);t&&v.push(t)}await l([],v),b(!1)},[a,M,l,n,w,C,k,g,N,S,i,h]);return{isUploading:p,setIsUploading:b,handleError:w,handleUpload:E}},O=f.q.label(C()),R=async(e,t,n,a)=>{if(!(0,s.dF)(t))try{let e=await (0,s.CL)(t);return z(t,e)}catch(e){}let r=await P(e,t,n,a);if(r)return E(r),r},G=()=>{let{addError:e}=(0,u.e)();return(0,j.useCallback)((t,n)=>{if(t instanceof m.Hx){if("rate_limit_error"===t.type){e((0,r.jsxs)("p",{children:[(0,r.jsx)(y.Z,{defaultMessage:"You’ve reached your limit for {resourceType} uploads. Please try again later.",id:"M88GeEDB7r",values:{resourceType:n}}),(0,r.jsx)(N.o,{})]}));return}if("document_password_protected"===t.errorCode){e((0,r.jsx)("p",{children:(0,r.jsx)(y.Z,{defaultMessage:"The document you uploaded is password protected. Please remove the password and try again.",id:"DHwwKwuaCR"})}));return}}if(t instanceof m.Hx&&"Image is too large"===t.message){e((0,r.jsx)("p",{children:(0,r.jsx)(y.Z,{defaultMessage:"Image is too large. <link>Learn more</link>",id:"SFbt+MAvby",values:{link:e=>(0,r.jsx)("a",{href:"https://support.anthropic.com/en/articles/9002500-what-kinds-of-images-can-i-upload-to-claude-ai",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-accent-main-100",children:e})}})}));return}e((0,r.jsx)("p",{children:(0,r.jsx)(y.Z,{defaultMessage:"Your {resourceType} upload failed. Please try again.",id:"ymWsV10Pz1",values:{resourceType:n}})}))},[e])},U=()=>{let{value:e}=(0,g.F)("janus_claude-ai");return e}},23529:function(e,t,n){n.d(t,{y:function(){return x}});var a,r,s=n(27573),i=n(11607),l=n(52939),o=n(49167),c=n(88738),d=n(11510),u=n(45790),f=n(5362),h=n(27218),m=n(13262);function x(e){let{isOpen:t,setIsOpen:n,fileName:a,fileUuid:x}=e,{data:g,isLoading:p}=function(e){let{fileUuid:t,enabled:n}=e,{activeOrganization:a}=(0,h.t)(),r=null==a?void 0:a.uuid;return(0,f.WE)("/api/organizations/".concat(r,"/files/").concat(t,"/content_preview"),{queryKey:[m.Ej,{orgUuid:r,fileUuid:t}],enabled:!!a&&n})}({fileUuid:x,enabled:t}),b=null;return b=p?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(i.Loading,{size:"md"})}):g?g.file_type===r.Csv?(0,s.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,s.jsxs)("div",{className:"bg-bg-100 w-[15rem] h-[12.5rem] rounded-lg border border-border-400 mb-5",children:[(0,s.jsxs)("div",{className:"h-[2.25rem] text-text-100 font-medium border-b border-border-400 px-3 flex items-center",children:[(0,s.jsx)(c.z,{className:"mr-2",size:16}),(0,s.jsx)("div",{children:(0,s.jsx)(u.Z,{defaultMessage:"Columns",id:"SUa8mpheAG"})})]}),(0,s.jsx)(o.$,{className:"h-[10.25rem] w-[15rem] pt-3 px-3 pb-1 text-text-200",children:g.column_names.map((e,t)=>(0,s.jsx)("div",{className:"truncate mb-2",children:e},t))})]}),(0,s.jsx)("div",{className:"text-lg text-text-100 mb-2",children:(0,s.jsx)(u.Z,{defaultMessage:"{columnCount, plural, one {# column} other {# columns}}, {rowCount, plural, one {# row} other {# rows}}",id:"wvGBF/FvBd",values:{columnCount:g.column_count,rowCount:g.row_count}})}),(0,s.jsxs)("div",{className:"flex items-center text-text-300 text-xs",children:[(0,s.jsx)(d.k,{className:"mr-2",size:12}),(0,s.jsx)("div",{children:(0,s.jsx)(u.Z,{defaultMessage:"Claude can analyze CSVs with the Analysis tool.",id:"gtvz8LDd6q"})})]})]}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(u.Z,{defaultMessage:"File previews are not supported for this file type",id:"99ghrgx5j8"})}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(u.Z,{defaultMessage:"Could not load file preview",id:"ATy/CxAxS4"})}),(0,s.jsx)(l.u_,{isOpen:t,hasCloseButton:!0,title:a,onClose:()=>n(!1),className:"w-[40rem] h-[24rem]",modalSize:"xl",children:b})}(a=r||(r={})).Generic="generic",a.Csv="csv",a.Excel="excel"},82274:function(e,t,n){n.d(t,{R:function(){return s}});var a=n(27573),r=n(45790);function s(e){let{showPDFWarning:t=!1,metaData:n}=e;return(0,a.jsxs)("span",{className:"text-text-500 mb-3 mt-0.5 flex flex-wrap gap-y-2 items-start items-center text-xs",children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)("span",{className:"mx-1.5 opacity-50 hidden lg:inline",children:"•"}),t?(0,a.jsx)("span",{children:(0,a.jsx)(r.Z,{defaultMessage:"This PDF was converted to text due to its large size",id:"o/G2cAuU9n"})}):(0,a.jsx)("span",{children:(0,a.jsx)(r.Z,{defaultMessage:"Formatting may be inconsistent from source",id:"9NeTb00/cM"})})]})}},26047:function(e,t,n){n.d(t,{J:function(){return o}});var a=n(27573),r=n(2130),s=n(52939),i=n(7653),l=n(82274);let o=e=>{let{file:t,isOpen:n,onClose:o}=e,c=(0,i.useMemo)(()=>(0,r.G)(t),[t]);return(0,a.jsx)("div",{children:(0,a.jsx)(s.u_,{modalSize:"xl",isOpen:!!n,onClose:o,hasCloseButton:!0,title:c.title,subtitle:(0,a.jsx)(l.R,{showPDFWarning:"pdf"===t.file_type,metaData:c.metaData}),autoCloseOnFocusOut:!0,children:(0,a.jsx)("div",{className:"bg-bg-000 rounded-lg border-0.5 border-border-300 shadow-sm whitespace-pre-wrap break-all text-xs p-4 font-mono",children:t.extracted_content})})})}},53186:function(e,t,n){n.d(t,{e:function(){return x}});var a=n(56683),r=n(27573),s=n(9788),i=n(70354),l=n(34422),o=n(7583);let c=e=>{let{isOpen:t,children:n,initialFocus:a,className:s,onClose:i}=e;return(0,r.jsx)(o.M,{children:t&&(0,r.jsx)(l.V,{open:t,onClose:i,initialFocus:a,className:s,static:!0,children:n})})};var d=n(80151),u=n(68425),f=n(7653),h=n(40950);function m(){let e=(0,a._)(["\n  rounded-md\n  overflow-hidden\n  shadow-[0_4px_32px_hsl(var(--always-black)/30%),_0_0_0_0.5px_hsl(var(--always-black)/25%)]\n"]);return m=function(){return e},e}let x=e=>{let{file:t,isOpen:n,onClose:a}=e,s=(0,h.Z)(),l=(0,f.useRef)(null);return(0,r.jsxs)(c,{isOpen:n,initialFocus:l,onClose:a,className:"fixed inset-0 z-modal grid place-items-center px-3 pb-14 pt-3",children:[(0,r.jsx)(u.E.div,{onClick:e=>{e.preventDefault(),e.stopPropagation(),a()},className:"fixed inset-0 bg-always-black/70 backdrop-blur-[0px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15,delay:.015}},exit:{opacity:0,transition:{opacity:{duration:.15}}}}),(0,r.jsxs)(u.E.div,{className:"relative max-w-[40rem]",initial:{opacity:0,scaleY:.925,scaleX:.95,translateY:"12px"},animate:{opacity:1,scaleX:1,scaleY:1,translateY:"0px",transition:{type:"spring",stiffness:750,damping:38,opacity:{duration:.15}}},exit:{opacity:0,scale:.95,transition:{duration:.15}},children:[(0,r.jsx)(i.z,{className:"hover:!text-text-100 !ring-border-200 !absolute left-full top-0 ml-1.5 !text-always-white !ring-offset-0",variant:"ghost",size:"icon_sm","aria-label":s.formatMessage({defaultMessage:"Close image preview",id:"gylVBxmE7Z"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),a()},ref:l,option:"rounded","data-testid":"close-file-preview",children:(0,r.jsx)(d.X,{size:"16"})}),(0,r.jsx)(g,{children:(0,r.jsx)("img",{loading:"eager",src:t.preview_asset.url,width:t.preview_asset.image_width,height:t.preview_asset.image_height,onClick:e=>{e.preventDefault(),e.stopPropagation(),a()},alt:s.formatMessage({defaultMessage:"Preview of {fileName}",id:"djtHiJ5aej"},{fileName:t.file_name}),onDragStart:e=>e.preventDefault(),className:"block w-full max-h-[calc(100vh-4rem)]"})}),(0,r.jsx)("div",{style:{textShadow:"0 0 8px hsl(var(--always-black)/25%)"},className:"pt-1.5 text-center text-always-white",children:t.file_name})]})]})},g=s.q.div(m())},32846:function(e,t,n){n.d(t,{i:function(){return o}});var a=n(27573),r=n(52939),s=n(78278),i=n(40950),l=n(45790);function o(e){let{isOpen:t,setIsOpen:n,documentFile:o}=e,c=(0,i.Z)();return(0,a.jsx)(r.u_,{isOpen:t,hasCloseButton:!0,title:o.file_name,onClose:()=>n(!1),children:(0,a.jsxs)("a",{className:"self-center group text-center",href:"".concat(o.document_asset.url,"/").concat(o.file_name),target:"_blank",children:[(0,a.jsxs)("div",{className:"w-fit rounded-lg relative m-2 mt-8",children:[(0,a.jsx)("img",{className:"bg-always-white rounded-lg border border-border-300 group-hover:border-accent-secondary-000/70 shadow-sm group-hover:-rotate-1 transition",alt:c.formatMessage({defaultMessage:"{fileName} thumbnail",id:"1bEhiGnHtL"},{fileName:o.file_name}),src:o.thumbnail_asset.url,style:{width:o.thumbnail_asset.image_width/1.5,height:o.thumbnail_asset.image_height/1.5}}),(0,a.jsx)("div",{className:"absolute w-full h-full inset-0 group-hover:bg-gradient-to-t from-accent-secondary-200/5 to-60% group-hover:-rotate-1 transition rounded-lg"}),(0,a.jsx)(e=>{let{pageCount:t}=e;return t<=1?null:(0,a.jsxs)("div",{className:"*:absolute *:w-full *:bg-always-white *:rounded-lg *:group-hover:border-accent-secondary-100/50 *:transition-all *:border *:border-border-300",children:[(0,a.jsx)("div",{className:"h-[98%] ml-1 group-hover:ml-[5px] group-hover:rotate-2 -z-10 shadow-sm top-[1%] opacity-70"}),(0,a.jsx)("div",{className:"h-[96%] ml-2 group-hover:ml-[10px] group-hover:rotate-3 group-hover:top-[2%]  -z-20 shadow top-[2%] opacity-50"})]})},{pageCount:o.document_asset.page_count})]}),(0,a.jsxs)("div",{className:"relative text-center inline-flex items-center justify-center text-pretty gap-2 p-1 text-sm text-text-300 *:transition",children:[(0,a.jsx)("p",{className:"group-hover:opacity-0 group-hover:scale-75",children:(0,a.jsx)(l.Z,{defaultMessage:"{count, plural, one {# page} other {# pages}}",id:"RyCW0gT/7M",values:{count:o.document_asset.page_count}})}),(0,a.jsxs)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 inline-flex items-center justify-center gap-1 text-accent-secondary-000",children:[(0,a.jsx)(s.b,{size:16,weight:"fill",className:"scale-50 group-hover:scale-100 transition-all "}),(0,a.jsx)("p",{children:(0,a.jsx)(l.Z,{defaultMessage:"Download",id:"5q3qC0sC3r"})})]})]})]})})}},2130:function(e,t,n){n.d(t,{G:function(){return s}});var a=n(27573),r=n(45790);function s(e){return{title:(()=>{if("html"===e.file_type){let t=e.extracted_content.match(/<title>(.*?)<\/title>/);return t?t[1]:e.file_name}return"paste.txt"===e.file_name?(0,a.jsx)(r.Z,{defaultMessage:"Pasted content",id:"okKwHjIO0b"}):e.file_name})(),metaData:(()=>{var t;let n=(0,a.jsx)(r.Z,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:e.extracted_content.split("\n").length}}),s=(t=e.file_size)<1048576?(0,a.jsx)(r.Z,{defaultMessage:"{size} KB",id:"/hgypvsrtJ",description:"File size in kilobytes",values:{size:(t/1024).toFixed(2)}}):(0,a.jsx)(r.Z,{defaultMessage:"{size} MB",id:"8amcCGO7ya",description:"File size in megabytes",values:{size:(t/1048576).toFixed(2)}});if("html"===e.file_type){let t=e.file_name,r=e.file_name.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\\/\n?]+)/gim);return r&&(t=r[0].replace("www.","")),(0,a.jsxs)("span",{children:[n,"\xa0",(0,a.jsx)("span",{className:"opacity-50 mx-1",children:"•"}),t]})}return(0,a.jsxs)("span",{children:[s,"\xa0",(0,a.jsx)("span",{className:"opacity-50 mx-1",children:"•"}),n]})})()}}},96070:function(e,t,n){n.d(t,{a:function(){return i},b:function(){return s}});var a=n(14448),r=n(14575);let s=()=>{let{value:e}=(0,a.F)("cheerios");return e},i=()=>(0,r.d)()},76220:function(e,t,n){n.d(t,{V:function(){return c},u:function(){return d}});var a=n(5362),r=n(27218),s=n(14448),i=n(13262),l=n(15992);let o={image_in:!1,pdf_in:!1},c=e=>{let{activeOrganization:t}=(0,r.t)(),n=null==t?void 0:t.uuid,{data:l,isLoading:c,isPlaceholderData:d}=(0,a.WE)("/api/organizations/".concat(n,"/model_configs/").concat(e),{queryKey:[i.Qn,n,e],enabled:!!n,staleTime:3e5,meta:{noToast:!0}}),u=!d&&l||o,{value:f}=(0,s.F)("claude_ai_cinnamon");return"claude-3-5-haiku-20241022"===e&&f&&(u={image_in:!0,pdf_in:!1}),{isLoading:c,modelConfig:u}},d=()=>{let{config:e}=(0,l.useConfig)("claude_ai_models"),t=e.get("models",[]),n=t.filter(e=>!e.inactive),a=n.filter(e=>!e.overflow),r=n.filter(e=>e.overflow);return{allModelOptions:t,activeModelOptions:n,mainModels:a,overflowModels:r}}},6766:function(e,t,n){n.d(t,{M:function(){return o}});var a=n(14448),r=n(5068),s=n(7653),i=n(28266),l=n(76220);let o=()=>{let e="sticky-model-selector",{value:t}=(0,a.F)("sticky_model_selector"),{value:n}=(0,a.F)("model_selector_enabled"),{activeModelOptions:o}=(0,l.u)(),c=(0,i.wN)(null),d=(0,r.useQuery)({queryKey:[e],queryFn:()=>{if(!t||!n)return null;let a=localStorage.getItem(e);return a===c?null:a&&o.find(e=>e.model===a)?a:null},initialData:null}),u=(0,s.useCallback)(t=>{t&&localStorage.setItem(e,t),d.refetch()},[d]);return{stickyModelPreference:d.data,setStickyModelPreference:u}}},35354:function(e,t,n){n.d(t,{EO:function(){return o},h7:function(){return r},rE:function(){return c}});var a,r,s=n(27573),i=n(7653);(a=r||(r={})).IDLE="IDLE",a.DRAGGING_OFF_TARGET="DRAGGING_OFF_TARGET",a.DRAGGING_ON_TARGET="DRAGGING_ON_TARGET",a.DROPPED="DROPPED";let l=(0,i.createContext)(void 0),o=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useDropZone must be used within a DropZoneProvider");return e},c=e=>{let{onDrop:t,children:n,className:a,disabled:r=!1}=e,[o,c]=(0,i.useState)("IDLE"),d=i.useRef(null),u=(0,i.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=d.current)||void 0===t?void 0:t.contains(e.target))?c("DRAGGING_ON_TARGET"):c("DRAGGING_OFF_TARGET")},[]),f=(0,i.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=d.current)||void 0===t?void 0:t.contains(e.relatedTarget))||e.target!==document.body&&null!==e.relatedTarget||c("IDLE")},[]),h=(0,i.useCallback)(e=>{var t;(null===(t=d.current)||void 0===t?void 0:t.contains(e.target))||(e.preventDefault(),c("IDLE"))},[]),m=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),t(e),c("DROPPED"),setTimeout(()=>{c("IDLE")},500)},[t]);return(0,i.useEffect)(()=>{if(!r)return document.body.addEventListener("dragover",u),document.body.addEventListener("dragleave",f),document.body.addEventListener("drop",h),()=>{document.body.removeEventListener("dragover",u),document.body.removeEventListener("dragleave",f),document.body.removeEventListener("drop",h)};c("IDLE")},[u,f,h,m,r]),(0,s.jsx)(l.Provider,{value:{dragState:o,setDragState:c},children:(0,s.jsx)("div",{ref:d,className:a,onDrop:r?void 0:m,children:n})})}},60949:function(e,t,n){n.d(t,{g:function(){return l}});var a=n(27573),r=n(26824),s=n(85689),i=n(10607);let l=(0,n(7653).forwardRef)((e,t)=>{let{checkState:n,onClick:l,label:o,...c}=e,d="partial"===n?r.W:s.J;return(0,a.jsxs)("div",{className:"p-2 -m-2 flex items-center",onClick:e=>{e.stopPropagation(),l({didCheck:"unchecked"===n})},children:[(0,a.jsx)("button",{ref:t,className:(0,i.Z)("rounded p-[0.5px] border-0.5 flex items-center justify-center transition","unchecked"!==n?"bg-accent-secondary-000 border-accent-secondary-200 shadow-sm":"border-border-200 hover:bg-bg-000 hover:shadow-sm"),...c,children:(0,a.jsx)(d,{className:(0,i.Z)("text-always-white transition",{invisible:"unchecked"===n}),weight:"bold",size:14})}),o&&(0,a.jsx)("span",{className:"ml-2 cursor-pointer",children:o})]})});l.displayName="PartialCheckbox"},10571:function(e,t,n){n.d(t,{g:function(){return c},r:function(){return u}});var a=n(56683),r=n(27573),s=n(9788),i=n(10607),l=n(45790);function o(){let e=(0,a._)(["\n  relative\n  bg-text-500/50\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return o=function(){return e},e}function c(e){let{className:t,height:n=24,width:a,rounded:s=!0}=e;return(0,r.jsx)(d,{className:(0,i.Z)(t,s&&"rounded-full"),style:{height:n,width:a||"100%"},children:(0,r.jsx)("span",{className:"sr-only",children:(0,r.jsx)(l.Z,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}let d=s.q.div(o());function u(e){let{className:t,height:n=24,width:a,rounded:s=!0}=e;return(0,r.jsx)("div",{className:(0,i.Z)(t,s&&"rounded-full","bg-text-500/50"),style:{height:n,width:a||"100%"},children:(0,r.jsx)("span",{className:"sr-only",children:(0,r.jsx)(l.Z,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}},49167:function(e,t,n){n.d(t,{$:function(){return c}});var a=n(56683),r=n(27573),s=n(47190),i=n(9788),l=n(7653);function o(){let e=(0,a._)(["",""]);return o=function(){return e},e}let c=e=>{let{hideBottomShadow:t,scrollContainerRef:n,persistedScrollToRef:a,...s}=e,i=(null==a?void 0:a.current)!==void 0,o=(0,l.useRef)(null),c=n||o,u=(0,l.useCallback)(()=>{let e=c.current;if(e&&!t){let{scrollTop:t,offsetHeight:n,scrollHeight:r}=e;t+n>=r?e.classList.remove("has-bottom-scroll"):e.classList.add("has-bottom-scroll"),i&&0!==t&&Math.abs(t-a.current)>10&&(a.current=t)}},[t,c,i,a]);return u(),(0,l.useEffect)(()=>{let e=c.current;requestAnimationFrame(()=>{i&&e&&(null==e||e.scrollTo({top:a.current,behavior:"instant"}))})},[c,i,a]),(0,l.useEffect)(()=>{let e=c.current;return null==e||e.addEventListener("scroll",u),()=>null==e?void 0:e.removeEventListener("scroll",u)},[u,c]),(0,r.jsx)(d,{ref:c,...s,children:s.children})},d=i.q.div(o(),s.X)},84464:function(e,t,n){n.d(t,{e:function(){return a}});let a=e=>{if(!e.preview_asset)return!1;let{image_width:t,image_height:n}=e.preview_asset;return t<200||n<200}},53949:function(e,t,n){var a,r;n.d(t,{Y:function(){return a}}),(r=a||(a={})).Image="image",r.Blob="blob",r.SanitizedDocument="document"},13890:function(e,t,n){n.d(t,{X_:function(){return i},ir:function(){return r},p5:function(){return s}});var a=n(10228);let r=e=>e===a.co.ACCESS_DENIED||e===a.co.UNAUTHENTICATED||e===a.co.DISABLED,s="Your organization has turned off this integration. Please contact your administrator to re-enable.",i={[a.Fg.GDRIVE]:"Google",[a.Fg.GITHUB]:"GitHub",[a.Fg.OUTLINE]:"Outline",[a.Fg.SALESFORCE]:"Salesforce",[a.Fg.GMAIL]:"Gmail",[a.Fg.GCAL]:"Google Calendar",[a.Fg.SLACK]:"Slack",[a.Fg.ASANA]:"Asana"}}}]);